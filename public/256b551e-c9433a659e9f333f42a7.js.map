{"version":3,"file":"256b551e-c9433a659e9f333f42a7.js","mappings":"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","sources":["webpack://freak-noize-studio/./node_modules/@babylonjs/core/Engines/thinEngine.js"],"sourcesContent":["import _asyncToGenerator from \"C:/Users/camila/Documents/FreakNoize-Studio-2022/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createClass from \"C:/Users/camila/Documents/FreakNoize-Studio-2022/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"C:/Users/camila/Documents/FreakNoize-Studio-2022/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"C:/Users/camila/Documents/FreakNoize-Studio-2022/node_modules/@babel/runtime/regenerator/index.js\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { EngineStore } from \"./engineStore.js\";\nimport { Effect } from \"../Materials/effect.js\";\nimport { _WarnImport } from \"../Misc/devTools.js\";\nimport { Observable } from \"../Misc/observable.js\";\nimport { DepthCullingState } from \"../States/depthCullingState.js\";\nimport { StencilState } from \"../States/stencilState.js\";\nimport { AlphaState } from \"../States/alphaCullingState.js\";\nimport { InternalTexture, InternalTextureSource } from \"../Materials/Textures/internalTexture.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { IsDocumentAvailable, IsWindowObjectExist } from \"../Misc/domManagement.js\";\nimport { WebGLShaderProcessor } from \"./WebGL/webGLShaderProcessors.js\";\nimport { WebGL2ShaderProcessor } from \"./WebGL/webGL2ShaderProcessors.js\";\nimport { WebGLDataBuffer } from \"../Meshes/WebGL/webGLDataBuffer.js\";\nimport { WebGLPipelineContext } from \"./WebGL/webGLPipelineContext.js\";\nimport { PerformanceConfigurator } from \"./performanceConfigurator.js\";\nimport { WebGLHardwareTexture } from \"./WebGL/webGLHardwareTexture.js\";\nimport { DrawWrapper } from \"../Materials/drawWrapper.js\";\nimport { StencilStateComposer } from \"../States/stencilStateComposer.js\";\nimport { ShaderLanguage } from \"../Materials/shaderLanguage.js\";\n/**\n * Keeps track of all the buffer info used in engine.\n */\nvar BufferPointer = /*#__PURE__*/_createClass(function BufferPointer() {\n  _classCallCheck(this, BufferPointer);\n});\n/**\n * The base engine class (root of all engines)\n */\nexport var ThinEngine = /*#__PURE__*/function () {\n  /**\n   * Creates a new engine\n   * @param canvasOrContext defines the canvas or WebGL context to use for rendering. If you provide a WebGL context, Babylon.js will not hook events on the canvas (like pointers, keyboards, etc...) so no event observables will be available. This is mostly used when Babylon.js is used as a plugin on a system which already used the WebGL context\n   * @param antialias defines enable antialiasing (default: false)\n   * @param options defines further options to be sent to the getContext() function\n   * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n   */\n  function ThinEngine(canvasOrContext, antialias, options, adaptToDeviceRatio) {\n    var _this = this;\n    _classCallCheck(this, ThinEngine);\n    /** @internal */\n    this._name = \"WebGL\";\n    /**\n     * Gets or sets a boolean that indicates if textures must be forced to power of 2 size even if not required\n     */\n    this.forcePOTTextures = false;\n    /**\n     * Gets a boolean indicating if the engine is currently rendering in fullscreen mode\n     */\n    this.isFullscreen = false;\n    /**\n     * Gets or sets a boolean indicating if back faces must be culled. If false, front faces are culled instead (true by default)\n     * If non null, this takes precedence over the value from the material\n     */\n    this.cullBackFaces = null;\n    /**\n     * Gets or sets a boolean indicating if the engine must keep rendering even if the window is not in foreground\n     */\n    this.renderEvenInBackground = true;\n    /**\n     * Gets or sets a boolean indicating that cache can be kept between frames\n     */\n    this.preventCacheWipeBetweenFrames = false;\n    /** Gets or sets a boolean indicating if the engine should validate programs after compilation */\n    this.validateShaderPrograms = false;\n    this._useReverseDepthBuffer = false;\n    /**\n     * Indicates if the z range in NDC space is 0..1 (value: true) or -1..1 (value: false)\n     */\n    this.isNDCHalfZRange = false;\n    /**\n     * Indicates that the origin of the texture/framebuffer space is the bottom left corner. If false, the origin is top left\n     */\n    this.hasOriginBottomLeft = true;\n    /**\n     * Gets or sets a boolean indicating that uniform buffers must be disabled even if they are supported\n     */\n    this.disableUniformBuffers = false;\n    /**\n     * An event triggered when the engine is disposed.\n     */\n    this.onDisposeObservable = new Observable();\n    this._frameId = 0;\n    /** @internal */\n    this._uniformBuffers = new Array();\n    /** @internal */\n    this._storageBuffers = new Array();\n    /** @internal */\n    this._webGLVersion = 1.0;\n    this._windowIsBackground = false;\n    this._highPrecisionShadersAllowed = true;\n    /** @internal */\n    this._badOS = false;\n    /** @internal */\n    this._badDesktopOS = false;\n    this._renderingQueueLaunched = false;\n    this._activeRenderLoops = new Array();\n    // Lost context\n    /**\n     * Observable signaled when a context lost event is raised\n     */\n    this.onContextLostObservable = new Observable();\n    /**\n     * Observable signaled when a context restored event is raised\n     */\n    this.onContextRestoredObservable = new Observable();\n    this._contextWasLost = false;\n    /** @internal */\n    this._doNotHandleContextLost = false;\n    /**\n     * Gets or sets a boolean indicating that vertex array object must be disabled even if they are supported\n     */\n    this.disableVertexArrayObjects = false;\n    // States\n    /** @internal */\n    this._colorWrite = true;\n    /** @internal */\n    this._colorWriteChanged = true;\n    /** @internal */\n    this._depthCullingState = new DepthCullingState();\n    /** @internal */\n    this._stencilStateComposer = new StencilStateComposer();\n    /** @internal */\n    this._stencilState = new StencilState();\n    /** @internal */\n    this._alphaState = new AlphaState();\n    /** @internal */\n    this._alphaMode = 1;\n    /** @internal */\n    this._alphaEquation = 0;\n    // Cache\n    /** @internal */\n    this._internalTexturesCache = new Array();\n    /** @internal */\n    this._renderTargetWrapperCache = new Array();\n    /** @internal */\n    this._activeChannel = 0;\n    this._currentTextureChannel = -1;\n    /** @internal */\n    this._boundTexturesCache = {};\n    this._compiledEffects = {};\n    this._vertexAttribArraysEnabled = [];\n    this._uintIndicesCurrentlySet = false;\n    this._currentBoundBuffer = new Array();\n    /** @internal */\n    this._currentFramebuffer = null;\n    /** @internal */\n    this._dummyFramebuffer = null;\n    this._currentBufferPointers = new Array();\n    this._currentInstanceLocations = new Array();\n    this._currentInstanceBuffers = new Array();\n    this._vaoRecordInProgress = false;\n    this._mustWipeVertexAttributes = false;\n    this._nextFreeTextureSlots = new Array();\n    this._maxSimultaneousTextures = 0;\n    this._maxMSAASamplesOverride = null;\n    this._activeRequests = new Array();\n    /**\n     * If set to true zooming in and out in the browser will rescale the hardware-scaling correctly.\n     */\n    this.adaptToDeviceRatio = false;\n    /** @internal */\n    this._lastDevicePixelRatio = 1.0;\n    /** @internal */\n    this._transformTextureUrl = null;\n    /**\n     * Gets information about the current host\n     */\n    this.hostInformation = {\n      isMobile: false\n    };\n    /**\n     * Defines whether the engine has been created with the premultipliedAlpha option on or not.\n     */\n    this.premultipliedAlpha = true;\n    /**\n     * Observable event triggered before each texture is initialized\n     */\n    this.onBeforeTextureInitObservable = new Observable();\n    /** @internal */\n    this._isWebGPU = false;\n    this._snapshotRenderingMode = 0;\n    this._useExactSrgbConversions = false;\n    this._viewportCached = {\n      x: 0,\n      y: 0,\n      z: 0,\n      w: 0\n    };\n    this._unpackFlipYCached = null;\n    /**\n     * In case you are sharing the context with other applications, it might\n     * be interested to not cache the unpack flip y state to ensure a consistent\n     * value would be set.\n     */\n    this.enableUnpackFlipYCached = true;\n    this._boundUniforms = {};\n    var canvas = null;\n    options = options || {};\n    this._creationOptions = options;\n    // Save this off for use in resize().\n    this.adaptToDeviceRatio = adaptToDeviceRatio !== null && adaptToDeviceRatio !== void 0 ? adaptToDeviceRatio : false;\n    this._stencilStateComposer.stencilGlobal = this._stencilState;\n    PerformanceConfigurator.SetMatrixPrecision(!!options.useHighPrecisionMatrix);\n    if (!canvasOrContext) {\n      return;\n    }\n    adaptToDeviceRatio = adaptToDeviceRatio || options.adaptToDeviceRatio || false;\n    if (canvasOrContext.getContext) {\n      canvas = canvasOrContext;\n      this._renderingCanvas = canvas;\n      if (antialias !== undefined) {\n        options.antialias = antialias;\n      }\n      if (options.deterministicLockstep === undefined) {\n        options.deterministicLockstep = false;\n      }\n      if (options.lockstepMaxSteps === undefined) {\n        options.lockstepMaxSteps = 4;\n      }\n      if (options.timeStep === undefined) {\n        options.timeStep = 1 / 60;\n      }\n      if (options.preserveDrawingBuffer === undefined) {\n        options.preserveDrawingBuffer = false;\n      }\n      if (options.audioEngine === undefined) {\n        options.audioEngine = true;\n      }\n      if (options.audioEngineOptions !== undefined && options.audioEngineOptions.audioContext !== undefined) {\n        this._audioContext = options.audioEngineOptions.audioContext;\n      }\n      if (options.audioEngineOptions !== undefined && options.audioEngineOptions.audioDestination !== undefined) {\n        this._audioDestination = options.audioEngineOptions.audioDestination;\n      }\n      if (options.stencil === undefined) {\n        options.stencil = true;\n      }\n      if (options.premultipliedAlpha === false) {\n        this.premultipliedAlpha = false;\n      }\n      if (options.xrCompatible === undefined) {\n        options.xrCompatible = true;\n      }\n      if (options.useExactSrgbConversions !== undefined) {\n        this._useExactSrgbConversions = options.useExactSrgbConversions;\n      }\n      this._doNotHandleContextLost = options.doNotHandleContextLost ? true : false;\n      // Exceptions\n      if (navigator && navigator.userAgent) {\n        // Function to check if running on mobile device\n        this._checkForMobile = function () {\n          var currentUA = navigator.userAgent;\n          _this.hostInformation.isMobile = currentUA.indexOf(\"Mobile\") !== -1 ||\n          // Needed for iOS 13+ detection on iPad (inspired by solution from https://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\n          currentUA.indexOf(\"Mac\") !== -1 && IsDocumentAvailable() && \"ontouchend\" in document;\n        };\n        // Set initial isMobile value\n        this._checkForMobile();\n        // Set up event listener to check when window is resized (used to get emulator activation to work properly)\n        if (IsWindowObjectExist()) {\n          window.addEventListener(\"resize\", this._checkForMobile);\n        }\n        var ua = navigator.userAgent;\n        var _iterator = _createForOfIteratorHelper(ThinEngine.ExceptionList),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var exception = _step.value;\n            var key = exception.key;\n            var targets = exception.targets;\n            var check = new RegExp(key);\n            if (check.test(ua)) {\n              if (exception.capture && exception.captureConstraint) {\n                var capture = exception.capture;\n                var constraint = exception.captureConstraint;\n                var regex = new RegExp(capture);\n                var matches = regex.exec(ua);\n                if (matches && matches.length > 0) {\n                  var capturedValue = parseInt(matches[matches.length - 1]);\n                  if (capturedValue >= constraint) {\n                    continue;\n                  }\n                }\n              }\n              var _iterator2 = _createForOfIteratorHelper(targets),\n                _step2;\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var target = _step2.value;\n                  switch (target) {\n                    case \"uniformBuffer\":\n                      this.disableUniformBuffers = true;\n                      break;\n                    case \"vao\":\n                      this.disableVertexArrayObjects = true;\n                      break;\n                    case \"antialias\":\n                      options.antialias = false;\n                      break;\n                    case \"maxMSAASamples\":\n                      this._maxMSAASamplesOverride = 1;\n                      break;\n                  }\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      // Context lost\n      if (!this._doNotHandleContextLost) {\n        this._onContextLost = function (evt) {\n          evt.preventDefault();\n          _this._contextWasLost = true;\n          Logger.Warn(\"WebGL context lost.\");\n          _this.onContextLostObservable.notifyObservers(_this);\n        };\n        this._onContextRestored = function () {\n          _this._restoreEngineAfterContextLost(_this._initGLContext.bind(_this));\n        };\n        canvas.addEventListener(\"webglcontextlost\", this._onContextLost, false);\n        canvas.addEventListener(\"webglcontextrestored\", this._onContextRestored, false);\n        options.powerPreference = \"high-performance\";\n      }\n      // Detect if we are running on a faulty buggy desktop OS.\n      this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      if (this._badDesktopOS) {\n        options.xrCompatible = false;\n      }\n      // GL\n      if (!options.disableWebGL2Support) {\n        try {\n          this._gl = canvas.getContext(\"webgl2\", options) || canvas.getContext(\"experimental-webgl2\", options);\n          if (this._gl) {\n            this._webGLVersion = 2.0;\n            this._shaderPlatformName = \"WEBGL2\";\n            // Prevent weird browsers to lie (yeah that happens!)\n            if (!this._gl.deleteQuery) {\n              this._webGLVersion = 1.0;\n              this._shaderPlatformName = \"WEBGL1\";\n            }\n          }\n        } catch (e) {\n          // Do nothing\n        }\n      }\n      if (!this._gl) {\n        if (!canvas) {\n          throw new Error(\"The provided canvas is null or undefined.\");\n        }\n        try {\n          this._gl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n        } catch (e) {\n          throw new Error(\"WebGL not supported\");\n        }\n      }\n      if (!this._gl) {\n        throw new Error(\"WebGL not supported\");\n      }\n    } else {\n      this._gl = canvasOrContext;\n      this._renderingCanvas = this._gl.canvas;\n      if (this._gl.renderbufferStorageMultisample) {\n        this._webGLVersion = 2.0;\n        this._shaderPlatformName = \"WEBGL2\";\n      } else {\n        this._shaderPlatformName = \"WEBGL1\";\n      }\n      var attributes = this._gl.getContextAttributes();\n      if (attributes) {\n        options.stencil = attributes.stencil;\n      }\n    }\n    // Ensures a consistent color space unpacking of textures cross browser.\n    this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n    if (options.useHighPrecisionFloats !== undefined) {\n      this._highPrecisionShadersAllowed = options.useHighPrecisionFloats;\n    }\n    // Viewport\n    var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n    var limitDeviceRatio = options.limitDeviceRatio || devicePixelRatio;\n    this._hardwareScalingLevel = adaptToDeviceRatio ? 1.0 / Math.min(limitDeviceRatio, devicePixelRatio) : 1.0;\n    this._lastDevicePixelRatio = devicePixelRatio;\n    this.resize();\n    this._isStencilEnable = options.stencil ? true : false;\n    this._initGLContext();\n    this._initFeatures();\n    // Prepare buffer pointers\n    for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n      this._currentBufferPointers[i] = new BufferPointer();\n    }\n    // Shader processor\n    this._shaderProcessor = this.webGLVersion > 1 ? new WebGL2ShaderProcessor() : new WebGLShaderProcessor();\n    // Detect if we are running on a faulty buggy OS.\n    this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent);\n    // Starting with iOS 14, we can trust the browser\n    // let matches = navigator.userAgent.match(/Version\\/(\\d+)/);\n    // if (matches && matches.length === 2) {\n    //     if (parseInt(matches[1]) >= 14) {\n    //         this._badOS = false;\n    //     }\n    // }\n    var versionToLog = \"Babylon.js v\".concat(ThinEngine.Version);\n    console.log(versionToLog + \" - \".concat(this.description));\n    // Check setAttribute in case of workers\n    if (this._renderingCanvas && this._renderingCanvas.setAttribute) {\n      this._renderingCanvas.setAttribute(\"data-engine\", versionToLog);\n    }\n  }\n  /**\n   * Returns the current npm package of the sdk\n   */\n  // Not mixed with Version for tooling purpose.\n  _createClass(ThinEngine, [{\n    key: \"description\",\n    get:\n    /**\n     * Returns a string describing the current engine\n     */\n    function get() {\n      var description = this.name + this.webGLVersion;\n      if (this._caps.parallelShaderCompile) {\n        description += \" - Parallel shader compilation\";\n      }\n      return description;\n    }\n    /**\n     * Gets or sets the name of the engine\n     */\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this._name;\n    },\n    set: function set(value) {\n      this._name = value;\n    }\n    /**\n     * Returns the version of the engine\n     */\n  }, {\n    key: \"version\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n    /**\n     * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n     */\n  }, {\n    key: \"_getShaderProcessor\",\n    value:\n    /**\n     * @internal\n     */\n    function _getShaderProcessor(shaderLanguage) {\n      return this._shaderProcessor;\n    }\n    /**\n     * Gets or sets a boolean indicating if depth buffer should be reverse, going from far to near.\n     * This can provide greater z depth for distant objects.\n     */\n  }, {\n    key: \"useReverseDepthBuffer\",\n    get: function get() {\n      return this._useReverseDepthBuffer;\n    },\n    set: function set(useReverse) {\n      if (useReverse === this._useReverseDepthBuffer) {\n        return;\n      }\n      this._useReverseDepthBuffer = useReverse;\n      if (useReverse) {\n        this._depthCullingState.depthFunc = 518;\n      } else {\n        this._depthCullingState.depthFunc = 515;\n      }\n    }\n    /**\n     * Gets the current frame id\n     */\n  }, {\n    key: \"frameId\",\n    get: function get() {\n      return this._frameId;\n    }\n    /**\n     * Gets a boolean indicating that the engine supports uniform buffers\n     * @see https://doc.babylonjs.com/features/webgl2#uniform-buffer-objets\n     */\n  }, {\n    key: \"supportsUniformBuffers\",\n    get: function get() {\n      return this.webGLVersion > 1 && !this.disableUniformBuffers;\n    }\n    /**\n     * Gets the options used for engine creation\n     * @returns EngineOptions object\n     */\n  }, {\n    key: \"getCreationOptions\",\n    value: function getCreationOptions() {\n      return this._creationOptions;\n    }\n    /** @internal */\n  }, {\n    key: \"_shouldUseHighPrecisionShader\",\n    get: function get() {\n      return !!(this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed);\n    }\n    /**\n     * Gets a boolean indicating that only power of 2 textures are supported\n     * Please note that you can still use non power of 2 textures but in this case the engine will forcefully convert them\n     */\n  }, {\n    key: \"needPOTTextures\",\n    get: function get() {\n      return this._webGLVersion < 2 || this.forcePOTTextures;\n    }\n    /**\n     * Gets the list of current active render loop functions\n     * @returns an array with the current render loop functions\n     */\n  }, {\n    key: \"activeRenderLoops\",\n    get: function get() {\n      return this._activeRenderLoops;\n    }\n    /**\n     * Gets or sets a boolean indicating if resources should be retained to be able to handle context lost events\n     * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#handling-webgl-context-lost\n     */\n  }, {\n    key: \"doNotHandleContextLost\",\n    get: function get() {\n      return this._doNotHandleContextLost;\n    },\n    set: function set(value) {\n      this._doNotHandleContextLost = value;\n    }\n  }, {\n    key: \"_supportsHardwareTextureRescaling\",\n    get: function get() {\n      return false;\n    }\n    /**\n     * sets the object from which width and height will be taken from when getting render width and height\n     * Will fallback to the gl object\n     * @param dimensions the framebuffer width and height that will be used.\n     */\n  }, {\n    key: \"framebufferDimensionsObject\",\n    set: function set(dimensions) {\n      this._framebufferDimensionsObject = dimensions;\n    }\n    /**\n     * Gets the current viewport\n     */\n  }, {\n    key: \"currentViewport\",\n    get: function get() {\n      return this._cachedViewport;\n    }\n    /**\n     * Gets the default empty texture\n     */\n  }, {\n    key: \"emptyTexture\",\n    get: function get() {\n      if (!this._emptyTexture) {\n        this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture;\n    }\n    /**\n     * Gets the default empty 3D texture\n     */\n  }, {\n    key: \"emptyTexture3D\",\n    get: function get() {\n      if (!this._emptyTexture3D) {\n        this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture3D;\n    }\n    /**\n     * Gets the default empty 2D array texture\n     */\n  }, {\n    key: \"emptyTexture2DArray\",\n    get: function get() {\n      if (!this._emptyTexture2DArray) {\n        this._emptyTexture2DArray = this.createRawTexture2DArray(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture2DArray;\n    }\n    /**\n     * Gets the default empty cube texture\n     */\n  }, {\n    key: \"emptyCubeTexture\",\n    get: function get() {\n      if (!this._emptyCubeTexture) {\n        var faceData = new Uint8Array(4);\n        var cubeData = [faceData, faceData, faceData, faceData, faceData, faceData];\n        this._emptyCubeTexture = this.createRawCubeTexture(cubeData, 1, 5, 0, false, false, 1);\n      }\n      return this._emptyCubeTexture;\n    }\n    /**\n     * Gets a boolean indicating if the engine runs in WebGPU or not.\n     */\n  }, {\n    key: \"isWebGPU\",\n    get: function get() {\n      return this._isWebGPU;\n    }\n    /**\n     * Gets the shader platform name used by the effects.\n     */\n  }, {\n    key: \"shaderPlatformName\",\n    get: function get() {\n      return this._shaderPlatformName;\n    }\n    /**\n     * Enables or disables the snapshot rendering mode\n     * Note that the WebGL engine does not support snapshot rendering so setting the value won't have any effect for this engine\n     */\n  }, {\n    key: \"snapshotRendering\",\n    get: function get() {\n      return false;\n    },\n    set: function set(activate) {\n      // WebGL engine does not support snapshot rendering\n    }\n    /**\n     * Gets or sets the snapshot rendering mode\n     */\n  }, {\n    key: \"snapshotRenderingMode\",\n    get: function get() {\n      return this._snapshotRenderingMode;\n    },\n    set: function set(mode) {\n      this._snapshotRenderingMode = mode;\n    }\n    /**\n     * Gets a boolean indicating if the exact sRGB conversions or faster approximations are used for converting to and from linear space.\n     */\n  }, {\n    key: \"useExactSrgbConversions\",\n    get: function get() {\n      return this._useExactSrgbConversions;\n    }\n    /**\n     * Creates a new snapshot at the next frame using the current snapshotRenderingMode\n     */\n  }, {\n    key: \"snapshotRenderingReset\",\n    value: function snapshotRenderingReset() {\n      this.snapshotRendering = false;\n    }\n  }, {\n    key: \"createCanvas\",\n    value:\n    /**\n     * Create a canvas. This method is overridden by other engines\n     * @param width width\n     * @param height height\n     * @returns ICanvas interface\n     */\n    function createCanvas(width, height) {\n      return ThinEngine._CreateCanvas(width, height);\n    }\n    /**\n     * Create an image to use with canvas\n     * @returns IImage interface\n     */\n  }, {\n    key: \"createCanvasImage\",\n    value: function createCanvasImage() {\n      return document.createElement(\"img\");\n    }\n  }, {\n    key: \"_restoreEngineAfterContextLost\",\n    value: function _restoreEngineAfterContextLost(initEngine) {\n      var _this2 = this;\n      // Adding a timeout to avoid race condition at browser level\n      setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _a, depthTest, depthFunc, depthMask, stencilTest;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this2._dummyFramebuffer = null;\n                depthTest = _this2._depthCullingState.depthTest; // backup those values because the call to initEngine / wipeCaches will reset them\n                depthFunc = _this2._depthCullingState.depthFunc;\n                depthMask = _this2._depthCullingState.depthMask;\n                stencilTest = _this2._stencilState.stencilTest; // Rebuild context\n                _context.next = 7;\n                return initEngine();\n              case 7:\n                // Rebuild effects\n                _this2._rebuildEffects();\n                (_a = _this2._rebuildComputeEffects) === null || _a === void 0 ? void 0 : _a.call(_this2);\n                // Rebuild textures\n                _this2._rebuildInternalTextures();\n                // Rebuild textures\n                _this2._rebuildRenderTargetWrappers();\n                // Rebuild buffers\n                _this2._rebuildBuffers();\n                // Cache\n                _this2.wipeCaches(true);\n                _this2._depthCullingState.depthTest = depthTest;\n                _this2._depthCullingState.depthFunc = depthFunc;\n                _this2._depthCullingState.depthMask = depthMask;\n                _this2._stencilState.stencilTest = stencilTest;\n                Logger.Warn(_this2.name + \" context successfully restored.\");\n                _this2.onContextRestoredObservable.notifyObservers(_this2);\n                _this2._contextWasLost = false;\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })), 0);\n    }\n    /**\n     * Shared initialization across engines types.\n     * @param canvas The canvas associated with this instance of the engine.\n     * @param doNotHandleTouchAction Defines that engine should ignore modifying touch action attribute and style\n     * @param audioEngine Defines if an audio engine should be created by default\n     */\n  }, {\n    key: \"_sharedInit\",\n    value: function _sharedInit(canvas, doNotHandleTouchAction, audioEngine) {\n      this._renderingCanvas = canvas;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderProcessingContext\",\n    value: function _getShaderProcessingContext(shaderLanguage) {\n      return null;\n    }\n  }, {\n    key: \"_rebuildInternalTextures\",\n    value: function _rebuildInternalTextures() {\n      var currentState = this._internalTexturesCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator3 = _createForOfIteratorHelper(currentState),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var internalTexture = _step3.value;\n          internalTexture._rebuild();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_rebuildRenderTargetWrappers\",\n    value: function _rebuildRenderTargetWrappers() {\n      var currentState = this._renderTargetWrapperCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator4 = _createForOfIteratorHelper(currentState),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var renderTargetWrapper = _step4.value;\n          renderTargetWrapper._rebuild();\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"_rebuildEffects\",\n    value: function _rebuildEffects() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        effect._pipelineContext = null; // because _prepareEffect will try to dispose this pipeline before recreating it and that would lead to webgl errors\n        effect._wasPreviouslyReady = false;\n        effect._prepareEffect();\n      }\n      Effect.ResetCache();\n    }\n    /**\n     * Gets a boolean indicating if all created effects are ready\n     * @returns true if all effects are ready\n     */\n  }, {\n    key: \"areAllEffectsReady\",\n    value: function areAllEffectsReady() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        if (!effect.isReady()) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: \"_rebuildBuffers\",\n    value: function _rebuildBuffers() {\n      // Uniforms\n      var _iterator5 = _createForOfIteratorHelper(this._uniformBuffers),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var uniformBuffer = _step5.value;\n          uniformBuffer._rebuild();\n        }\n        // Storage buffers\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var _iterator6 = _createForOfIteratorHelper(this._storageBuffers),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var storageBuffer = _step6.value;\n          storageBuffer._rebuild();\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"_initGLContext\",\n    value: function _initGLContext() {\n      var _a;\n      // Caps\n      this._caps = {\n        maxTexturesImageUnits: this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),\n        maxCombinedTexturesImageUnits: this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n        maxVertexTextureImageUnits: this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n        maxTextureSize: this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),\n        maxSamples: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_SAMPLES) : 1,\n        maxCubemapTextureSize: this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),\n        maxRenderTextureSize: this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),\n        maxVertexAttribs: this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),\n        maxVaryingVectors: this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),\n        maxFragmentUniformVectors: this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),\n        maxVertexUniformVectors: this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),\n        parallelShaderCompile: this._gl.getExtension(\"KHR_parallel_shader_compile\") || undefined,\n        standardDerivatives: this._webGLVersion > 1 || this._gl.getExtension(\"OES_standard_derivatives\") !== null,\n        maxAnisotropy: 1,\n        astc: this._gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n        bptc: this._gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n        s3tc: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        s3tc_srgb: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n        pvrtc: this._gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n        etc1: this._gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n        etc2: this._gl.getExtension(\"WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBGL_compressed_texture_es3_0\"),\n        textureAnisotropicFilterExtension: this._gl.getExtension(\"EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\"),\n        uintIndices: this._webGLVersion > 1 || this._gl.getExtension(\"OES_element_index_uint\") !== null,\n        fragmentDepthSupported: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_frag_depth\") !== null,\n        highPrecisionShaderSupported: false,\n        timerQuery: this._gl.getExtension(\"EXT_disjoint_timer_query_webgl2\") || this._gl.getExtension(\"EXT_disjoint_timer_query\"),\n        supportOcclusionQuery: this._webGLVersion > 1,\n        canUseTimestampForTimerQuery: false,\n        drawBuffersExtension: false,\n        maxMSAASamples: 1,\n        colorBufferFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_float\")),\n        textureFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_float\") ? true : false,\n        textureHalfFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_half_float\") ? true : false,\n        textureHalfFloatRender: false,\n        textureFloatLinearFiltering: false,\n        textureFloatRender: false,\n        textureHalfFloatLinearFiltering: false,\n        vertexArrayObject: false,\n        instancedArrays: false,\n        textureLOD: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_shader_texture_lod\") ? true : false,\n        blendMinMax: false,\n        multiview: this._gl.getExtension(\"OVR_multiview2\"),\n        oculusMultiview: this._gl.getExtension(\"OCULUS_multiview\"),\n        depthTextureExtension: false,\n        canUseGLInstanceID: this._webGLVersion > 1,\n        canUseGLVertexID: this._webGLVersion > 1,\n        supportComputeShaders: false,\n        supportSRGBBuffers: false,\n        supportTransformFeedbacks: this._webGLVersion > 1,\n        textureMaxLevel: this._webGLVersion > 1,\n        texture2DArrayMaxLayerCount: this._webGLVersion > 1 ? 256 : 128\n      };\n      // Infos\n      this._glVersion = this._gl.getParameter(this._gl.VERSION);\n      var rendererInfo = this._gl.getExtension(\"WEBGL_debug_renderer_info\");\n      if (rendererInfo != null) {\n        this._glRenderer = this._gl.getParameter(rendererInfo.UNMASKED_RENDERER_WEBGL);\n        this._glVendor = this._gl.getParameter(rendererInfo.UNMASKED_VENDOR_WEBGL);\n      }\n      if (!this._glVendor) {\n        this._glVendor = this._gl.getParameter(this._gl.VENDOR) || \"Unknown vendor\";\n      }\n      if (!this._glRenderer) {\n        this._glRenderer = this._gl.getParameter(this._gl.RENDERER) || \"Unknown renderer\";\n      }\n      // Constants\n      if (this._gl.HALF_FLOAT_OES !== 0x8d61) {\n        this._gl.HALF_FLOAT_OES = 0x8d61; // Half floating-point type (16-bit).\n      }\n\n      if (this._gl.RGBA16F !== 0x881a) {\n        this._gl.RGBA16F = 0x881a; // RGBA 16-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.RGBA32F !== 0x8814) {\n        this._gl.RGBA32F = 0x8814; // RGBA 32-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.DEPTH24_STENCIL8 !== 35056) {\n        this._gl.DEPTH24_STENCIL8 = 35056;\n      }\n      // Extensions\n      if (this._caps.timerQuery) {\n        if (this._webGLVersion === 1) {\n          this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery);\n        }\n        this._caps.canUseTimestampForTimerQuery = ((_a = this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)) !== null && _a !== void 0 ? _a : 0) > 0;\n      }\n      this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\n      this._caps.textureFloatLinearFiltering = this._caps.textureFloat && this._gl.getExtension(\"OES_texture_float_linear\") ? true : false;\n      this._caps.textureFloatRender = this._caps.textureFloat && this._canRenderToFloatFramebuffer() ? true : false;\n      this._caps.textureHalfFloatLinearFiltering = this._webGLVersion > 1 || this._caps.textureHalfFloat && this._gl.getExtension(\"OES_texture_half_float_linear\") ? true : false;\n      // Compressed formats\n      if (this._caps.astc) {\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n      }\n      if (this._caps.bptc) {\n        this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n      }\n      if (this._caps.s3tc_srgb) {\n        this._gl.COMPRESSED_SRGB_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n      }\n      if (this._caps.etc2) {\n        this._gl.COMPRESSED_SRGB8_ETC2 = this._caps.etc2.COMPRESSED_SRGB8_ETC2;\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = this._caps.etc2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n      }\n      // Checks if some of the format renders first to allow the use of webgl inspector.\n      if (this._webGLVersion > 1) {\n        if (this._gl.HALF_FLOAT_OES !== 0x140b) {\n          this._gl.HALF_FLOAT_OES = 0x140b;\n        }\n      }\n      this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer();\n      // Draw buffers\n      if (this._webGLVersion > 1) {\n        this._caps.drawBuffersExtension = true;\n        this._caps.maxMSAASamples = this._maxMSAASamplesOverride !== null ? this._maxMSAASamplesOverride : this._gl.getParameter(this._gl.MAX_SAMPLES);\n      } else {\n        var drawBuffersExtension = this._gl.getExtension(\"WEBGL_draw_buffers\");\n        if (drawBuffersExtension !== null) {\n          this._caps.drawBuffersExtension = true;\n          this._gl.drawBuffers = drawBuffersExtension.drawBuffersWEBGL.bind(drawBuffersExtension);\n          this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;\n          for (var i = 0; i < 16; i++) {\n            this._gl[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"] = drawBuffersExtension[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n          }\n        }\n      }\n      // Depth Texture\n      if (this._webGLVersion > 1) {\n        this._caps.depthTextureExtension = true;\n      } else {\n        var depthTextureExtension = this._gl.getExtension(\"WEBGL_depth_texture\");\n        if (depthTextureExtension != null) {\n          this._caps.depthTextureExtension = true;\n          this._gl.UNSIGNED_INT_24_8 = depthTextureExtension.UNSIGNED_INT_24_8_WEBGL;\n        }\n      }\n      // Vertex array object\n      if (this.disableVertexArrayObjects) {\n        this._caps.vertexArrayObject = false;\n      } else if (this._webGLVersion > 1) {\n        this._caps.vertexArrayObject = true;\n      } else {\n        var vertexArrayObjectExtension = this._gl.getExtension(\"OES_vertex_array_object\");\n        if (vertexArrayObjectExtension != null) {\n          this._caps.vertexArrayObject = true;\n          this._gl.createVertexArray = vertexArrayObjectExtension.createVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.bindVertexArray = vertexArrayObjectExtension.bindVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.deleteVertexArray = vertexArrayObjectExtension.deleteVertexArrayOES.bind(vertexArrayObjectExtension);\n        }\n      }\n      // Instances count\n      if (this._webGLVersion > 1) {\n        this._caps.instancedArrays = true;\n      } else {\n        var instanceExtension = this._gl.getExtension(\"ANGLE_instanced_arrays\");\n        if (instanceExtension != null) {\n          this._caps.instancedArrays = true;\n          this._gl.drawArraysInstanced = instanceExtension.drawArraysInstancedANGLE.bind(instanceExtension);\n          this._gl.drawElementsInstanced = instanceExtension.drawElementsInstancedANGLE.bind(instanceExtension);\n          this._gl.vertexAttribDivisor = instanceExtension.vertexAttribDivisorANGLE.bind(instanceExtension);\n        } else {\n          this._caps.instancedArrays = false;\n        }\n      }\n      if (this._gl.getShaderPrecisionFormat) {\n        var vertexhighp = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT);\n        var fragmenthighp = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);\n        if (vertexhighp && fragmenthighp) {\n          this._caps.highPrecisionShaderSupported = vertexhighp.precision !== 0 && fragmenthighp.precision !== 0;\n        }\n      }\n      if (this._webGLVersion > 1) {\n        this._caps.blendMinMax = true;\n      } else {\n        var blendMinMaxExtension = this._gl.getExtension(\"EXT_blend_minmax\");\n        if (blendMinMaxExtension != null) {\n          this._caps.blendMinMax = true;\n          this._gl.MAX = blendMinMaxExtension.MAX_EXT;\n          this._gl.MIN = blendMinMaxExtension.MIN_EXT;\n        }\n      }\n      // sRGB buffers\n      // only run this if not already set to true (in the constructor, for example)\n      if (!this._caps.supportSRGBBuffers) {\n        if (this._webGLVersion > 1) {\n          this._caps.supportSRGBBuffers = true;\n        } else {\n          var sRGBExtension = this._gl.getExtension(\"EXT_sRGB\");\n          if (sRGBExtension != null) {\n            this._caps.supportSRGBBuffers = true;\n            this._gl.SRGB = sRGBExtension.SRGB_EXT;\n            this._gl.SRGB8 = sRGBExtension.SRGB_ALPHA_EXT;\n            this._gl.SRGB8_ALPHA8 = sRGBExtension.SRGB_ALPHA_EXT;\n          }\n        }\n        // take into account the forced state that was provided in options\n        // When the issue in angle/chrome is fixed the flag should be taken into account only when it is explicitly defined\n        this._caps.supportSRGBBuffers = this._caps.supportSRGBBuffers && !!(this._creationOptions && this._creationOptions.forceSRGBBufferSupportState);\n      }\n      // Depth buffer\n      this._depthCullingState.depthTest = true;\n      this._depthCullingState.depthFunc = this._gl.LEQUAL;\n      this._depthCullingState.depthMask = true;\n      // Texture maps\n      this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;\n      for (var slot = 0; slot < this._maxSimultaneousTextures; slot++) {\n        this._nextFreeTextureSlots.push(slot);\n      }\n    }\n  }, {\n    key: \"_initFeatures\",\n    value: function _initFeatures() {\n      this._features = {\n        forceBitmapOverHTMLImageElement: false,\n        supportRenderAndCopyToLodForFloatTextures: this._webGLVersion !== 1,\n        supportDepthStencilTexture: this._webGLVersion !== 1,\n        supportShadowSamplers: this._webGLVersion !== 1,\n        uniformBufferHardCheckMatrix: false,\n        allowTexturePrefiltering: this._webGLVersion !== 1,\n        trackUbosInFrame: false,\n        checkUbosContentBeforeUpload: false,\n        supportCSM: this._webGLVersion !== 1,\n        basisNeedsPOT: this._webGLVersion === 1,\n        support3DTextures: this._webGLVersion !== 1,\n        needTypeSuffixInShaderConstants: this._webGLVersion !== 1,\n        supportMSAA: this._webGLVersion !== 1,\n        supportSSAO2: this._webGLVersion !== 1,\n        supportExtendedTextureFormats: this._webGLVersion !== 1,\n        supportSwitchCaseInShader: this._webGLVersion !== 1,\n        supportSyncTextureRead: true,\n        needsInvertingBitmap: true,\n        useUBOBindingCache: true,\n        needShaderCodeInlining: false,\n        needToAlwaysBindUniformBuffers: false,\n        supportRenderPasses: false,\n        supportSpriteInstancing: true,\n        _collectUbosUpdatedInFrame: false\n      };\n    }\n    /**\n     * Gets version of the current webGL context\n     * Keep it for back compat - use version instead\n     */\n  }, {\n    key: \"webGLVersion\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n    /**\n     * Gets a string identifying the name of the class\n     * @returns \"Engine\" string\n     */\n  }, {\n    key: \"getClassName\",\n    value: function getClassName() {\n      return \"ThinEngine\";\n    }\n    /**\n     * Returns true if the stencil buffer has been enabled through the creation option of the context.\n     */\n  }, {\n    key: \"isStencilEnable\",\n    get: function get() {\n      return this._isStencilEnable;\n    }\n    /** @internal */\n  }, {\n    key: \"_prepareWorkingCanvas\",\n    value: function _prepareWorkingCanvas() {\n      if (this._workingCanvas) {\n        return;\n      }\n      this._workingCanvas = this.createCanvas(1, 1);\n      var context = this._workingCanvas.getContext(\"2d\");\n      if (context) {\n        this._workingContext = context;\n      }\n    }\n    /**\n     * Reset the texture cache to empty state\n     */\n  }, {\n    key: \"resetTextureCache\",\n    value: function resetTextureCache() {\n      for (var key in this._boundTexturesCache) {\n        if (!Object.prototype.hasOwnProperty.call(this._boundTexturesCache, key)) {\n          continue;\n        }\n        this._boundTexturesCache[key] = null;\n      }\n      this._currentTextureChannel = -1;\n    }\n    /**\n     * Gets an object containing information about the current engine context\n     * @returns an object containing the vendor, the renderer and the version of the current engine context\n     */\n  }, {\n    key: \"getInfo\",\n    value: function getInfo() {\n      return this.getGlInfo();\n    }\n    /**\n     * Gets an object containing information about the current webGL context\n     * @returns an object containing the vendor, the renderer and the version of the current webGL context\n     */\n  }, {\n    key: \"getGlInfo\",\n    value: function getGlInfo() {\n      return {\n        vendor: this._glVendor,\n        renderer: this._glRenderer,\n        version: this._glVersion\n      };\n    }\n    /**\n     * Defines the hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @param level defines the level to use\n     */\n  }, {\n    key: \"setHardwareScalingLevel\",\n    value: function setHardwareScalingLevel(level) {\n      this._hardwareScalingLevel = level;\n      this.resize();\n    }\n    /**\n     * Gets the current hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @returns a number indicating the current hardware scaling level\n     */\n  }, {\n    key: \"getHardwareScalingLevel\",\n    value: function getHardwareScalingLevel() {\n      return this._hardwareScalingLevel;\n    }\n    /**\n     * Gets the list of loaded textures\n     * @returns an array containing all loaded textures\n     */\n  }, {\n    key: \"getLoadedTexturesCache\",\n    value: function getLoadedTexturesCache() {\n      return this._internalTexturesCache;\n    }\n    /**\n     * Gets the object containing all engine capabilities\n     * @returns the EngineCapabilities object\n     */\n  }, {\n    key: \"getCaps\",\n    value: function getCaps() {\n      return this._caps;\n    }\n    /**\n     * stop executing a render loop function and remove it from the execution array\n     * @param renderFunction defines the function to be removed. If not provided all functions will be removed.\n     */\n  }, {\n    key: \"stopRenderLoop\",\n    value: function stopRenderLoop(renderFunction) {\n      if (!renderFunction) {\n        this._activeRenderLoops = [];\n        return;\n      }\n      var index = this._activeRenderLoops.indexOf(renderFunction);\n      if (index >= 0) {\n        this._activeRenderLoops.splice(index, 1);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_renderLoop\",\n    value: function _renderLoop() {\n      if (!this._contextWasLost) {\n        var shouldRender = true;\n        if (!this.renderEvenInBackground && this._windowIsBackground) {\n          shouldRender = false;\n        }\n        if (shouldRender) {\n          // Start new frame\n          this.beginFrame();\n          for (var index = 0; index < this._activeRenderLoops.length; index++) {\n            var renderFunction = this._activeRenderLoops[index];\n            renderFunction();\n          }\n          // Present\n          this.endFrame();\n        }\n      }\n      if (this._activeRenderLoops.length > 0) {\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      } else {\n        this._renderingQueueLaunched = false;\n      }\n    }\n    /**\n     * Gets the HTML canvas attached with the current webGL context\n     * @returns a HTML canvas\n     */\n  }, {\n    key: \"getRenderingCanvas\",\n    value: function getRenderingCanvas() {\n      return this._renderingCanvas;\n    }\n    /**\n     * Gets the audio context specified in engine initialization options\n     * @returns an Audio Context\n     */\n  }, {\n    key: \"getAudioContext\",\n    value: function getAudioContext() {\n      return this._audioContext;\n    }\n    /**\n     * Gets the audio destination specified in engine initialization options\n     * @returns an audio destination node\n     */\n  }, {\n    key: \"getAudioDestination\",\n    value: function getAudioDestination() {\n      return this._audioDestination;\n    }\n    /**\n     * Gets host window\n     * @returns the host window object\n     */\n  }, {\n    key: \"getHostWindow\",\n    value: function getHostWindow() {\n      if (!IsWindowObjectExist()) {\n        return null;\n      }\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument && this._renderingCanvas.ownerDocument.defaultView) {\n        return this._renderingCanvas.ownerDocument.defaultView;\n      }\n      return window;\n    }\n    /**\n     * Gets the current render width\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render width\n     */\n  }, {\n    key: \"getRenderWidth\",\n    value: function getRenderWidth() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.width;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferWidth : this._gl.drawingBufferWidth;\n    }\n    /**\n     * Gets the current render height\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render height\n     */\n  }, {\n    key: \"getRenderHeight\",\n    value: function getRenderHeight() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.height;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferHeight : this._gl.drawingBufferHeight;\n    }\n    /**\n     * Can be used to override the current requestAnimationFrame requester.\n     * @internal\n     */\n  }, {\n    key: \"_queueNewFrame\",\n    value: function _queueNewFrame(bindedRenderFunction, requester) {\n      return ThinEngine.QueueNewFrame(bindedRenderFunction, requester);\n    }\n    /**\n     * Register and execute a render loop. The engine can have more than one render function\n     * @param renderFunction defines the function to continuously execute\n     */\n  }, {\n    key: \"runRenderLoop\",\n    value: function runRenderLoop(renderFunction) {\n      if (this._activeRenderLoops.indexOf(renderFunction) !== -1) {\n        return;\n      }\n      this._activeRenderLoops.push(renderFunction);\n      if (!this._renderingQueueLaunched) {\n        this._renderingQueueLaunched = true;\n        this._boundRenderFunction = this._renderLoop.bind(this);\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      }\n    }\n    /**\n     * Clear the current render buffer or the current render target (if any is set up)\n     * @param color defines the color to use\n     * @param backBuffer defines if the back buffer must be cleared\n     * @param depth defines if the depth buffer must be cleared\n     * @param stencil defines if the stencil buffer must be cleared\n     */\n  }, {\n    key: \"clear\",\n    value: function clear(color, backBuffer, depth) {\n      var stencil = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var useStencilGlobalOnly = this.stencilStateComposer.useStencilGlobalOnly;\n      this.stencilStateComposer.useStencilGlobalOnly = true; // make sure the stencil mask is coming from the global stencil and not from a material (effect) which would currently be in effect\n      this.applyStates();\n      this.stencilStateComposer.useStencilGlobalOnly = useStencilGlobalOnly;\n      var mode = 0;\n      if (backBuffer && color) {\n        this._gl.clearColor(color.r, color.g, color.b, color.a !== undefined ? color.a : 1.0);\n        mode |= this._gl.COLOR_BUFFER_BIT;\n      }\n      if (depth) {\n        if (this.useReverseDepthBuffer) {\n          this._depthCullingState.depthFunc = this._gl.GEQUAL;\n          this._gl.clearDepth(0.0);\n        } else {\n          this._gl.clearDepth(1.0);\n        }\n        mode |= this._gl.DEPTH_BUFFER_BIT;\n      }\n      if (stencil) {\n        this._gl.clearStencil(0);\n        mode |= this._gl.STENCIL_BUFFER_BIT;\n      }\n      this._gl.clear(mode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_viewport\",\n    value: function _viewport(x, y, width, height) {\n      if (x !== this._viewportCached.x || y !== this._viewportCached.y || width !== this._viewportCached.z || height !== this._viewportCached.w) {\n        this._viewportCached.x = x;\n        this._viewportCached.y = y;\n        this._viewportCached.z = width;\n        this._viewportCached.w = height;\n        this._gl.viewport(x, y, width, height);\n      }\n    }\n    /**\n     * Set the WebGL's viewport\n     * @param viewport defines the viewport element to be used\n     * @param requiredWidth defines the width required for rendering. If not provided the rendering canvas' width is used\n     * @param requiredHeight defines the height required for rendering. If not provided the rendering canvas' height is used\n     */\n  }, {\n    key: \"setViewport\",\n    value: function setViewport(viewport, requiredWidth, requiredHeight) {\n      var width = requiredWidth || this.getRenderWidth();\n      var height = requiredHeight || this.getRenderHeight();\n      var x = viewport.x || 0;\n      var y = viewport.y || 0;\n      this._cachedViewport = viewport;\n      this._viewport(x * width, y * height, width * viewport.width, height * viewport.height);\n    }\n    /**\n     * Begin a new frame\n     */\n  }, {\n    key: \"beginFrame\",\n    value: function beginFrame() {}\n    /**\n     * Enf the current frame\n     */\n  }, {\n    key: \"endFrame\",\n    value: function endFrame() {\n      // Force a flush in case we are using a bad OS.\n      if (this._badOS) {\n        this.flushFramebuffer();\n      }\n      this._frameId++;\n    }\n    /**\n     * Resize the view according to the canvas' size\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     */\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var forceSetSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var width;\n      var height;\n      // Requery hardware scaling level to handle zoomed-in resizing.\n      if (this.adaptToDeviceRatio) {\n        var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n        var changeRatio = this._lastDevicePixelRatio / devicePixelRatio;\n        this._lastDevicePixelRatio = devicePixelRatio;\n        this._hardwareScalingLevel *= changeRatio;\n      }\n      if (IsWindowObjectExist()) {\n        width = this._renderingCanvas ? this._renderingCanvas.clientWidth || this._renderingCanvas.width : window.innerWidth;\n        height = this._renderingCanvas ? this._renderingCanvas.clientHeight || this._renderingCanvas.height : window.innerHeight;\n      } else {\n        width = this._renderingCanvas ? this._renderingCanvas.width : 100;\n        height = this._renderingCanvas ? this._renderingCanvas.height : 100;\n      }\n      this.setSize(width / this._hardwareScalingLevel, height / this._hardwareScalingLevel, forceSetSize);\n    }\n    /**\n     * Force a specific size of the canvas\n     * @param width defines the new canvas' width\n     * @param height defines the new canvas' height\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     * @returns true if the size was changed\n     */\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      var forceSetSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!this._renderingCanvas) {\n        return false;\n      }\n      width = width | 0;\n      height = height | 0;\n      if (!forceSetSize && this._renderingCanvas.width === width && this._renderingCanvas.height === height) {\n        return false;\n      }\n      this._renderingCanvas.width = width;\n      this._renderingCanvas.height = height;\n      return true;\n    }\n    /**\n     * Binds the frame buffer to the specified texture.\n     * @param texture The render target wrapper to render to\n     * @param faceIndex The face of the texture to render to in case of cube texture\n     * @param requiredWidth The width of the target to render to\n     * @param requiredHeight The height of the target to render to\n     * @param forceFullscreenViewport Forces the viewport to be the entire texture/screen if true\n     * @param lodLevel defines the lod level to bind to the frame buffer\n     * @param layer defines the 2d array index to bind to frame buffer to\n     */\n  }, {\n    key: \"bindFramebuffer\",\n    value: function bindFramebuffer(texture) {\n      var faceIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var requiredWidth = arguments.length > 2 ? arguments[2] : undefined;\n      var requiredHeight = arguments.length > 3 ? arguments[3] : undefined;\n      var forceFullscreenViewport = arguments.length > 4 ? arguments[4] : undefined;\n      var lodLevel = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var layer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b, _c, _d, _e;\n      var webglRTWrapper = texture;\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      }\n      this._currentRenderTarget = texture;\n      this._bindUnboundFramebuffer(webglRTWrapper._MSAAFramebuffer ? webglRTWrapper._MSAAFramebuffer : webglRTWrapper._framebuffer);\n      var gl = this._gl;\n      if (texture.is2DArray) {\n        gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, (_a = texture.texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource, lodLevel, layer);\n      } else if (texture.isCube) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_b = texture.texture._hardwareTexture) === null || _b === void 0 ? void 0 : _b.underlyingResource, lodLevel);\n      }\n      var depthStencilTexture = texture._depthStencilTexture;\n      if (depthStencilTexture) {\n        var attachment = texture._depthStencilTextureWithStencil ? gl.DEPTH_STENCIL_ATTACHMENT : gl.DEPTH_ATTACHMENT;\n        if (texture.is2DArray) {\n          gl.framebufferTextureLayer(gl.FRAMEBUFFER, attachment, (_c = depthStencilTexture._hardwareTexture) === null || _c === void 0 ? void 0 : _c.underlyingResource, lodLevel, layer);\n        } else if (texture.isCube) {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_d = depthStencilTexture._hardwareTexture) === null || _d === void 0 ? void 0 : _d.underlyingResource, lodLevel);\n        } else {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, (_e = depthStencilTexture._hardwareTexture) === null || _e === void 0 ? void 0 : _e.underlyingResource, lodLevel);\n        }\n      }\n      if (this._cachedViewport && !forceFullscreenViewport) {\n        this.setViewport(this._cachedViewport, requiredWidth, requiredHeight);\n      } else {\n        if (!requiredWidth) {\n          requiredWidth = texture.width;\n          if (lodLevel) {\n            requiredWidth = requiredWidth / Math.pow(2, lodLevel);\n          }\n        }\n        if (!requiredHeight) {\n          requiredHeight = texture.height;\n          if (lodLevel) {\n            requiredHeight = requiredHeight / Math.pow(2, lodLevel);\n          }\n        }\n        this._viewport(0, 0, requiredWidth, requiredHeight);\n      }\n      this.wipeCaches();\n    }\n    /**\n     * Set various states to the webGL context\n     * @param culling defines culling state: true to enable culling, false to disable it\n     * @param zOffset defines the value to apply to zOffset (0 by default)\n     * @param force defines if states must be applied even if cache is up to date\n     * @param reverseSide defines if culling must be reversed (CCW if false, CW if true)\n     * @param cullBackFaces true to cull back faces, false to cull front faces (if culling is enabled)\n     * @param stencil stencil states to set\n     * @param zOffsetUnits defines the value to apply to zOffsetUnits (0 by default)\n     */\n  }, {\n    key: \"setState\",\n    value: function setState(culling) {\n      var zOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var force = arguments.length > 2 ? arguments[2] : undefined;\n      var reverseSide = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var cullBackFaces = arguments.length > 4 ? arguments[4] : undefined;\n      var stencil = arguments.length > 5 ? arguments[5] : undefined;\n      var zOffsetUnits = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b;\n      // Culling\n      if (this._depthCullingState.cull !== culling || force) {\n        this._depthCullingState.cull = culling;\n      }\n      // Cull face\n      var cullFace = ((_b = (_a = this.cullBackFaces) !== null && _a !== void 0 ? _a : cullBackFaces) !== null && _b !== void 0 ? _b : true) ? this._gl.BACK : this._gl.FRONT;\n      if (this._depthCullingState.cullFace !== cullFace || force) {\n        this._depthCullingState.cullFace = cullFace;\n      }\n      // Z offset\n      this.setZOffset(zOffset);\n      this.setZOffsetUnits(zOffsetUnits);\n      // Front face\n      var frontFace = reverseSide ? this._gl.CW : this._gl.CCW;\n      if (this._depthCullingState.frontFace !== frontFace || force) {\n        this._depthCullingState.frontFace = frontFace;\n      }\n      this._stencilStateComposer.stencilMaterial = stencil;\n    }\n    /**\n     * Gets a boolean indicating if depth testing is enabled\n     * @returns the current state\n     */\n  }, {\n    key: \"getDepthBuffer\",\n    value: function getDepthBuffer() {\n      return this._depthCullingState.depthTest;\n    }\n    /**\n     * Enable or disable depth buffering\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setDepthBuffer\",\n    value: function setDepthBuffer(enable) {\n      this._depthCullingState.depthTest = enable;\n    }\n    /**\n     * Set the z offset Factor to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffset\",\n    value: function setZOffset(value) {\n      this._depthCullingState.zOffset = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Factor\n     * @returns the current zOffset Factor state\n     */\n  }, {\n    key: \"getZOffset\",\n    value: function getZOffset() {\n      var zOffset = this._depthCullingState.zOffset;\n      return this.useReverseDepthBuffer ? -zOffset : zOffset;\n    }\n    /**\n     * Set the z offset Units to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffsetUnits\",\n    value: function setZOffsetUnits(value) {\n      this._depthCullingState.zOffsetUnits = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Units\n     * @returns the current zOffset Units state\n     */\n  }, {\n    key: \"getZOffsetUnits\",\n    value: function getZOffsetUnits() {\n      var zOffsetUnits = this._depthCullingState.zOffsetUnits;\n      return this.useReverseDepthBuffer ? -zOffsetUnits : zOffsetUnits;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindUnboundFramebuffer\",\n    value: function _bindUnboundFramebuffer(framebuffer) {\n      if (this._currentFramebuffer !== framebuffer) {\n        this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, framebuffer);\n        this._currentFramebuffer = framebuffer;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_currentFrameBufferIsDefaultFrameBuffer\",\n    value: function _currentFrameBufferIsDefaultFrameBuffer() {\n      return this._currentFramebuffer === null;\n    }\n    /**\n     * Generates the mipmaps for a texture\n     * @param texture texture to generate the mipmaps for\n     */\n  }, {\n    key: \"generateMipmaps\",\n    value: function generateMipmaps(texture) {\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, texture, true);\n      this._gl.generateMipmap(this._gl.TEXTURE_2D);\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n    }\n    /**\n     * Unbind the current render target texture from the webGL context\n     * @param texture defines the render target wrapper to unbind\n     * @param disableGenerateMipMaps defines a boolean indicating that mipmaps must not be generated\n     * @param onBeforeUnbind defines a function which will be called before the effective unbind\n     */\n  }, {\n    key: \"unBindFramebuffer\",\n    value: function unBindFramebuffer(texture) {\n      var disableGenerateMipMaps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var onBeforeUnbind = arguments.length > 2 ? arguments[2] : undefined;\n      var _a;\n      var webglRTWrapper = texture;\n      this._currentRenderTarget = null;\n      // If MSAA, we need to bitblt back to main texture\n      var gl = this._gl;\n      if (webglRTWrapper._MSAAFramebuffer) {\n        if (texture.isMulti) {\n          // This texture is part of a MRT texture, we need to treat all attachments\n          this.unBindMultiColorAttachmentFramebuffer(texture, disableGenerateMipMaps, onBeforeUnbind);\n          return;\n        }\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webglRTWrapper._MSAAFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webglRTWrapper._framebuffer);\n        gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n      }\n      if (((_a = texture.texture) === null || _a === void 0 ? void 0 : _a.generateMipMaps) && !disableGenerateMipMaps && !texture.isCube) {\n        this.generateMipmaps(texture.texture);\n      }\n      if (onBeforeUnbind) {\n        if (webglRTWrapper._MSAAFramebuffer) {\n          // Bind the correct framebuffer\n          this._bindUnboundFramebuffer(webglRTWrapper._framebuffer);\n        }\n        onBeforeUnbind();\n      }\n      this._bindUnboundFramebuffer(null);\n    }\n    /**\n     * Force a webGL flush (ie. a flush of all waiting webGL commands)\n     */\n  }, {\n    key: \"flushFramebuffer\",\n    value: function flushFramebuffer() {\n      this._gl.flush();\n    }\n    /**\n     * Unbind the current render target and bind the default framebuffer\n     */\n  }, {\n    key: \"restoreDefaultFramebuffer\",\n    value: function restoreDefaultFramebuffer() {\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      } else {\n        this._bindUnboundFramebuffer(null);\n      }\n      if (this._cachedViewport) {\n        this.setViewport(this._cachedViewport);\n      }\n      this.wipeCaches();\n    }\n    // VBOs\n    /** @internal */\n  }, {\n    key: \"_resetVertexBufferBinding\",\n    value: function _resetVertexBufferBinding() {\n      this.bindArrayBuffer(null);\n      this._cachedVertexBuffers = null;\n    }\n    /**\n     * Creates a vertex buffer\n     * @param data the data for the vertex buffer\n     * @returns the new WebGL static buffer\n     */\n  }, {\n    key: \"createVertexBuffer\",\n    value: function createVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.STATIC_DRAW);\n    }\n  }, {\n    key: \"_createVertexBuffer\",\n    value: function _createVertexBuffer(data, usage) {\n      var vbo = this._gl.createBuffer();\n      if (!vbo) {\n        throw new Error(\"Unable to create vertex buffer\");\n      }\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      this.bindArrayBuffer(dataBuffer);\n      if (data instanceof Array) {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(data), usage);\n      } else {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, data, usage);\n      }\n      this._resetVertexBufferBinding();\n      dataBuffer.references = 1;\n      return dataBuffer;\n    }\n    /**\n     * Creates a dynamic vertex buffer\n     * @param data the data for the dynamic vertex buffer\n     * @returns the new WebGL dynamic buffer\n     */\n  }, {\n    key: \"createDynamicVertexBuffer\",\n    value: function createDynamicVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.DYNAMIC_DRAW);\n    }\n  }, {\n    key: \"_resetIndexBufferBinding\",\n    value: function _resetIndexBufferBinding() {\n      this.bindIndexBuffer(null);\n      this._cachedIndexBuffer = null;\n    }\n    /**\n     * Creates a new index buffer\n     * @param indices defines the content of the index buffer\n     * @param updatable defines if the index buffer must be updatable\n     * @returns a new webGL buffer\n     */\n  }, {\n    key: \"createIndexBuffer\",\n    value: function createIndexBuffer(indices, updatable) {\n      var vbo = this._gl.createBuffer();\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      if (!vbo) {\n        throw new Error(\"Unable to create index buffer\");\n      }\n      this.bindIndexBuffer(dataBuffer);\n      var data = this._normalizeIndexData(indices);\n      this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, updatable ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW);\n      this._resetIndexBufferBinding();\n      dataBuffer.references = 1;\n      dataBuffer.is32Bits = data.BYTES_PER_ELEMENT === 4;\n      return dataBuffer;\n    }\n  }, {\n    key: \"_normalizeIndexData\",\n    value: function _normalizeIndexData(indices) {\n      var bytesPerElement = indices.BYTES_PER_ELEMENT;\n      if (bytesPerElement === 2) {\n        return indices;\n      }\n      // Check 32 bit support\n      if (this._caps.uintIndices) {\n        if (indices instanceof Uint32Array) {\n          return indices;\n        } else {\n          // number[] or Int32Array, check if 32 bit is necessary\n          for (var index = 0; index < indices.length; index++) {\n            if (indices[index] >= 65535) {\n              return new Uint32Array(indices);\n            }\n          }\n          return new Uint16Array(indices);\n        }\n      }\n      // No 32 bit support, force conversion to 16 bit (values greater 16 bit are lost)\n      return new Uint16Array(indices);\n    }\n    /**\n     * Bind a webGL buffer to the webGL context\n     * @param buffer defines the buffer to bind\n     */\n  }, {\n    key: \"bindArrayBuffer\",\n    value: function bindArrayBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind a specific block at a given index in a specific shader program\n     * @param pipelineContext defines the pipeline context to use\n     * @param blockName defines the block name\n     * @param index defines the index where to bind the block\n     */\n  }, {\n    key: \"bindUniformBlock\",\n    value: function bindUniformBlock(pipelineContext, blockName, index) {\n      var program = pipelineContext.program;\n      var uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n      this._gl.uniformBlockBinding(program, uniformLocation, index);\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"bindIndexBuffer\",\n    value: function bindIndexBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ELEMENT_ARRAY_BUFFER);\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(buffer, target) {\n      if (this._vaoRecordInProgress || this._currentBoundBuffer[target] !== buffer) {\n        this._gl.bindBuffer(target, buffer ? buffer.underlyingResource : null);\n        this._currentBoundBuffer[target] = buffer;\n      }\n    }\n    /**\n     * update the bound buffer with the given data\n     * @param data defines the data to update\n     */\n  }, {\n    key: \"updateArrayBuffer\",\n    value: function updateArrayBuffer(data) {\n      this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n    }\n  }, {\n    key: \"_vertexAttribPointer\",\n    value: function _vertexAttribPointer(buffer, indx, size, type, normalized, stride, offset) {\n      var pointer = this._currentBufferPointers[indx];\n      if (!pointer) {\n        return;\n      }\n      var changed = false;\n      if (!pointer.active) {\n        changed = true;\n        pointer.active = true;\n        pointer.index = indx;\n        pointer.size = size;\n        pointer.type = type;\n        pointer.normalized = normalized;\n        pointer.stride = stride;\n        pointer.offset = offset;\n        pointer.buffer = buffer;\n      } else {\n        if (pointer.buffer !== buffer) {\n          pointer.buffer = buffer;\n          changed = true;\n        }\n        if (pointer.size !== size) {\n          pointer.size = size;\n          changed = true;\n        }\n        if (pointer.type !== type) {\n          pointer.type = type;\n          changed = true;\n        }\n        if (pointer.normalized !== normalized) {\n          pointer.normalized = normalized;\n          changed = true;\n        }\n        if (pointer.stride !== stride) {\n          pointer.stride = stride;\n          changed = true;\n        }\n        if (pointer.offset !== offset) {\n          pointer.offset = offset;\n          changed = true;\n        }\n      }\n      if (changed || this._vaoRecordInProgress) {\n        this.bindArrayBuffer(buffer);\n        if (type === this._gl.UNSIGNED_INT || type === this._gl.INT) {\n          this._gl.vertexAttribIPointer(indx, size, type, stride, offset);\n        } else {\n          this._gl.vertexAttribPointer(indx, size, type, normalized, stride, offset);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindIndexBufferWithCache\",\n    value: function _bindIndexBufferWithCache(indexBuffer) {\n      if (indexBuffer == null) {\n        return;\n      }\n      if (this._cachedIndexBuffer !== indexBuffer) {\n        this._cachedIndexBuffer = indexBuffer;\n        this.bindIndexBuffer(indexBuffer);\n        this._uintIndicesCurrentlySet = indexBuffer.is32Bits;\n      }\n    }\n  }, {\n    key: \"_bindVertexBuffersAttributes\",\n    value: function _bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers) {\n      var attributes = effect.getAttributesNames();\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this.unbindAllAttributes();\n      for (var index = 0; index < attributes.length; index++) {\n        var order = effect.getAttributeLocation(index);\n        if (order >= 0) {\n          var ai = attributes[index];\n          var vertexBuffer = null;\n          if (overrideVertexBuffers) {\n            vertexBuffer = overrideVertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            vertexBuffer = vertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            continue;\n          }\n          this._gl.enableVertexAttribArray(order);\n          if (!this._vaoRecordInProgress) {\n            this._vertexAttribArraysEnabled[order] = true;\n          }\n          var buffer = vertexBuffer.getBuffer();\n          if (buffer) {\n            this._vertexAttribPointer(buffer, order, vertexBuffer.getSize(), vertexBuffer.type, vertexBuffer.normalized, vertexBuffer.byteStride, vertexBuffer.byteOffset);\n            if (vertexBuffer.getIsInstanced()) {\n              this._gl.vertexAttribDivisor(order, vertexBuffer.getInstanceDivisor());\n              if (!this._vaoRecordInProgress) {\n                this._currentInstanceLocations.push(order);\n                this._currentInstanceBuffers.push(buffer);\n              }\n            }\n          }\n        }\n      }\n    }\n    /**\n     * Records a vertex array object\n     * @see https://doc.babylonjs.com/features/webgl2#vertex-array-objects\n     * @param vertexBuffers defines the list of vertex buffers to store\n     * @param indexBuffer defines the index buffer to store\n     * @param effect defines the effect to store\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     * @returns the new vertex array object\n     */\n  }, {\n    key: \"recordVertexArrayObject\",\n    value: function recordVertexArrayObject(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      var vao = this._gl.createVertexArray();\n      if (!vao) {\n        throw new Error(\"Unable to create VAO\");\n      }\n      this._vaoRecordInProgress = true;\n      this._gl.bindVertexArray(vao);\n      this._mustWipeVertexAttributes = true;\n      this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      this.bindIndexBuffer(indexBuffer);\n      this._vaoRecordInProgress = false;\n      this._gl.bindVertexArray(null);\n      return vao;\n    }\n    /**\n     * Bind a specific vertex array object\n     * @see https://doc.babylonjs.com/features/webgl2#vertex-array-objects\n     * @param vertexArrayObject defines the vertex array object to bind\n     * @param indexBuffer defines the index buffer to bind\n     */\n  }, {\n    key: \"bindVertexArrayObject\",\n    value: function bindVertexArrayObject(vertexArrayObject, indexBuffer) {\n      if (this._cachedVertexArrayObject !== vertexArrayObject) {\n        this._cachedVertexArrayObject = vertexArrayObject;\n        this._gl.bindVertexArray(vertexArrayObject);\n        this._cachedVertexBuffers = null;\n        this._cachedIndexBuffer = null;\n        this._uintIndicesCurrentlySet = indexBuffer != null && indexBuffer.is32Bits;\n        this._mustWipeVertexAttributes = true;\n      }\n    }\n    /**\n     * Bind webGl buffers directly to the webGL context\n     * @param vertexBuffer defines the vertex buffer to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param vertexDeclaration defines the vertex declaration to use with the vertex buffer\n     * @param vertexStrideSize defines the vertex stride of the vertex buffer\n     * @param effect defines the effect associated with the vertex buffer\n     */\n  }, {\n    key: \"bindBuffersDirectly\",\n    value: function bindBuffersDirectly(vertexBuffer, indexBuffer, vertexDeclaration, vertexStrideSize, effect) {\n      if (this._cachedVertexBuffers !== vertexBuffer || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffer;\n        this._cachedEffectForVertexBuffers = effect;\n        var attributesCount = effect.getAttributesCount();\n        this._unbindVertexArrayObject();\n        this.unbindAllAttributes();\n        var offset = 0;\n        for (var index = 0; index < attributesCount; index++) {\n          if (index < vertexDeclaration.length) {\n            var order = effect.getAttributeLocation(index);\n            if (order >= 0) {\n              this._gl.enableVertexAttribArray(order);\n              this._vertexAttribArraysEnabled[order] = true;\n              this._vertexAttribPointer(vertexBuffer, order, vertexDeclaration[index], this._gl.FLOAT, false, vertexStrideSize, offset);\n            }\n            offset += vertexDeclaration[index] * 4;\n          }\n        }\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n  }, {\n    key: \"_unbindVertexArrayObject\",\n    value: function _unbindVertexArrayObject() {\n      if (!this._cachedVertexArrayObject) {\n        return;\n      }\n      this._cachedVertexArrayObject = null;\n      this._gl.bindVertexArray(null);\n    }\n    /**\n     * Bind a list of vertex buffers to the webGL context\n     * @param vertexBuffers defines the list of vertex buffers to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param effect defines the effect associated with the vertex buffers\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     */\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      if (this._cachedVertexBuffers !== vertexBuffers || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffers;\n        this._cachedEffectForVertexBuffers = effect;\n        this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n    /**\n     * Unbind all instance attributes\n     */\n  }, {\n    key: \"unbindInstanceAttributes\",\n    value: function unbindInstanceAttributes() {\n      var boundBuffer;\n      for (var i = 0, ul = this._currentInstanceLocations.length; i < ul; i++) {\n        var instancesBuffer = this._currentInstanceBuffers[i];\n        if (boundBuffer != instancesBuffer && instancesBuffer.references) {\n          boundBuffer = instancesBuffer;\n          this.bindArrayBuffer(instancesBuffer);\n        }\n        var offsetLocation = this._currentInstanceLocations[i];\n        this._gl.vertexAttribDivisor(offsetLocation, 0);\n      }\n      this._currentInstanceBuffers.length = 0;\n      this._currentInstanceLocations.length = 0;\n    }\n    /**\n     * Release and free the memory of a vertex array object\n     * @param vao defines the vertex array object to delete\n     */\n  }, {\n    key: \"releaseVertexArrayObject\",\n    value: function releaseVertexArrayObject(vao) {\n      this._gl.deleteVertexArray(vao);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseBuffer\",\n    value: function _releaseBuffer(buffer) {\n      buffer.references--;\n      if (buffer.references === 0) {\n        this._deleteBuffer(buffer);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"_deleteBuffer\",\n    value: function _deleteBuffer(buffer) {\n      this._gl.deleteBuffer(buffer.underlyingResource);\n    }\n    /**\n     * Update the content of a webGL buffer used with instantiation and bind it to the webGL context\n     * @param instancesBuffer defines the webGL buffer to update and bind\n     * @param data defines the data to store in the buffer\n     * @param offsetLocations defines the offsets or attributes information used to determine where data must be stored in the buffer\n     */\n  }, {\n    key: \"updateAndBindInstancesBuffer\",\n    value: function updateAndBindInstancesBuffer(instancesBuffer, data, offsetLocations) {\n      this.bindArrayBuffer(instancesBuffer);\n      if (data) {\n        this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n      }\n      if (offsetLocations[0].index !== undefined) {\n        this.bindInstancesBuffer(instancesBuffer, offsetLocations, true);\n      } else {\n        for (var index = 0; index < 4; index++) {\n          var offsetLocation = offsetLocations[index];\n          if (!this._vertexAttribArraysEnabled[offsetLocation]) {\n            this._gl.enableVertexAttribArray(offsetLocation);\n            this._vertexAttribArraysEnabled[offsetLocation] = true;\n          }\n          this._vertexAttribPointer(instancesBuffer, offsetLocation, 4, this._gl.FLOAT, false, 64, index * 16);\n          this._gl.vertexAttribDivisor(offsetLocation, 1);\n          this._currentInstanceLocations.push(offsetLocation);\n          this._currentInstanceBuffers.push(instancesBuffer);\n        }\n      }\n    }\n    /**\n     * Bind the content of a webGL buffer used with instantiation\n     * @param instancesBuffer defines the webGL buffer to bind\n     * @param attributesInfo defines the offsets or attributes information used to determine where data must be stored in the buffer\n     * @param computeStride defines Whether to compute the strides from the info or use the default 0\n     */\n  }, {\n    key: \"bindInstancesBuffer\",\n    value: function bindInstancesBuffer(instancesBuffer, attributesInfo) {\n      var computeStride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.bindArrayBuffer(instancesBuffer);\n      var stride = 0;\n      if (computeStride) {\n        for (var i = 0; i < attributesInfo.length; i++) {\n          var ai = attributesInfo[i];\n          stride += ai.attributeSize * 4;\n        }\n      }\n      for (var _i = 0; _i < attributesInfo.length; _i++) {\n        var _ai = attributesInfo[_i];\n        if (_ai.index === undefined) {\n          _ai.index = this._currentEffect.getAttributeLocationByName(_ai.attributeName);\n        }\n        if (_ai.index < 0) {\n          continue;\n        }\n        if (!this._vertexAttribArraysEnabled[_ai.index]) {\n          this._gl.enableVertexAttribArray(_ai.index);\n          this._vertexAttribArraysEnabled[_ai.index] = true;\n        }\n        this._vertexAttribPointer(instancesBuffer, _ai.index, _ai.attributeSize, _ai.attributeType || this._gl.FLOAT, _ai.normalized || false, stride, _ai.offset);\n        this._gl.vertexAttribDivisor(_ai.index, _ai.divisor === undefined ? 1 : _ai.divisor);\n        this._currentInstanceLocations.push(_ai.index);\n        this._currentInstanceBuffers.push(instancesBuffer);\n      }\n    }\n    /**\n     * Disable the instance attribute corresponding to the name in parameter\n     * @param name defines the name of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttributeByName\",\n    value: function disableInstanceAttributeByName(name) {\n      if (!this._currentEffect) {\n        return;\n      }\n      var attributeLocation = this._currentEffect.getAttributeLocationByName(name);\n      this.disableInstanceAttribute(attributeLocation);\n    }\n    /**\n     * Disable the instance attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttribute\",\n    value: function disableInstanceAttribute(attributeLocation) {\n      var shouldClean = false;\n      var index;\n      while ((index = this._currentInstanceLocations.indexOf(attributeLocation)) !== -1) {\n        this._currentInstanceLocations.splice(index, 1);\n        this._currentInstanceBuffers.splice(index, 1);\n        shouldClean = true;\n        index = this._currentInstanceLocations.indexOf(attributeLocation);\n      }\n      if (shouldClean) {\n        this._gl.vertexAttribDivisor(attributeLocation, 0);\n        this.disableAttributeByIndex(attributeLocation);\n      }\n    }\n    /**\n     * Disable the attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableAttributeByIndex\",\n    value: function disableAttributeByIndex(attributeLocation) {\n      this._gl.disableVertexAttribArray(attributeLocation);\n      this._vertexAttribArraysEnabled[attributeLocation] = false;\n      this._currentBufferPointers[attributeLocation].active = false;\n    }\n    /**\n     * Send a draw order\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"draw\",\n    value: function draw(useTriangles, indexStart, indexCount, instancesCount) {\n      this.drawElementsType(useTriangles ? 0 : 1, indexStart, indexCount, instancesCount);\n    }\n    /**\n     * Draw a list of points\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawPointClouds\",\n    value: function drawPointClouds(verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(2, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawUnIndexed\",\n    value: function drawUnIndexed(useTriangles, verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(useTriangles ? 0 : 1, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of indexed primitives\n     * @param fillMode defines the primitive to use\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawElementsType\",\n    value: function drawElementsType(fillMode, indexStart, indexCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      // Render\n      var drawMode = this._drawMode(fillMode);\n      var indexFormat = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT;\n      var mult = this._uintIndicesCurrentlySet ? 4 : 2;\n      if (instancesCount) {\n        this._gl.drawElementsInstanced(drawMode, indexCount, indexFormat, indexStart * mult, instancesCount);\n      } else {\n        this._gl.drawElements(drawMode, indexCount, indexFormat, indexStart * mult);\n      }\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param fillMode defines the primitive to use\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawArraysType\",\n    value: function drawArraysType(fillMode, verticesStart, verticesCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      var drawMode = this._drawMode(fillMode);\n      if (instancesCount) {\n        this._gl.drawArraysInstanced(drawMode, verticesStart, verticesCount, instancesCount);\n      } else {\n        this._gl.drawArrays(drawMode, verticesStart, verticesCount);\n      }\n    }\n  }, {\n    key: \"_drawMode\",\n    value: function _drawMode(fillMode) {\n      switch (fillMode) {\n        // Triangle views\n        case 0:\n          return this._gl.TRIANGLES;\n        case 2:\n          return this._gl.POINTS;\n        case 1:\n          return this._gl.LINES;\n        // Draw modes\n        case 3:\n          return this._gl.POINTS;\n        case 4:\n          return this._gl.LINES;\n        case 5:\n          return this._gl.LINE_LOOP;\n        case 6:\n          return this._gl.LINE_STRIP;\n        case 7:\n          return this._gl.TRIANGLE_STRIP;\n        case 8:\n          return this._gl.TRIANGLE_FAN;\n        default:\n          return this._gl.TRIANGLES;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_reportDrawCall\",\n    value: function _reportDrawCall() {\n      // Will be implemented by children\n    }\n    // Shaders\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseEffect\",\n    value: function _releaseEffect(effect) {\n      if (this._compiledEffects[effect._key]) {\n        delete this._compiledEffects[effect._key];\n      }\n      var pipelineContext = effect.getPipelineContext();\n      if (pipelineContext) {\n        this._deletePipelineContext(pipelineContext);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_deletePipelineContext\",\n    value: function _deletePipelineContext(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (webGLPipelineContext && webGLPipelineContext.program) {\n        webGLPipelineContext.program.__SPECTOR_rebuildProgram = null;\n        this._gl.deleteProgram(webGLPipelineContext.program);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getGlobalDefines\",\n    value: function _getGlobalDefines(defines) {\n      if (defines) {\n        if (this.isNDCHalfZRange) {\n          defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n        } else {\n          delete defines[\"IS_NDC_HALF_ZRANGE\"];\n        }\n        if (this.useReverseDepthBuffer) {\n          defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n        } else {\n          delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n        }\n        if (this.useExactSrgbConversions) {\n          defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n        } else {\n          delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n        }\n        return;\n      } else {\n        var s = \"\";\n        if (this.isNDCHalfZRange) {\n          s += \"#define IS_NDC_HALF_ZRANGE\";\n        }\n        if (this.useReverseDepthBuffer) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_REVERSE_DEPTHBUFFER\";\n        }\n        if (this.useExactSrgbConversions) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n        }\n        return s;\n      }\n    }\n    /**\n     * Create a new effect (used to store vertex/fragment shaders)\n     * @param baseName defines the base name of the effect (The name of file without .fragment.fx or .vertex.fx)\n     * @param attributesNamesOrOptions defines either a list of attribute names or an IEffectCreationOptions object\n     * @param uniformsNamesOrEngine defines either a list of uniform names or the engine to use\n     * @param samplers defines an array of string used to represent textures\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param fallbacks defines the list of potential fallbacks to use if shader compilation fails\n     * @param onCompiled defines a function to call when the effect creation is successful\n     * @param onError defines a function to call when the effect creation has failed\n     * @param indexParameters defines an object containing the index values to use to compile shaders (like the maximum number of simultaneous lights)\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     * @returns the new Effect\n     */\n  }, {\n    key: \"createEffect\",\n    value: function createEffect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, defines, fallbacks, onCompiled, onError, indexParameters) {\n      var shaderLanguage = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : ShaderLanguage.GLSL;\n      var _a;\n      var vertex = baseName.vertexElement || baseName.vertex || baseName.vertexToken || baseName.vertexSource || baseName;\n      var fragment = baseName.fragmentElement || baseName.fragment || baseName.fragmentToken || baseName.fragmentSource || baseName;\n      var globalDefines = this._getGlobalDefines();\n      var fullDefines = (_a = defines !== null && defines !== void 0 ? defines : attributesNamesOrOptions.defines) !== null && _a !== void 0 ? _a : \"\";\n      if (globalDefines) {\n        fullDefines += globalDefines;\n      }\n      var name = vertex + \"+\" + fragment + \"@\" + fullDefines;\n      if (this._compiledEffects[name]) {\n        var compiledEffect = this._compiledEffects[name];\n        if (onCompiled && compiledEffect.isReady()) {\n          onCompiled(compiledEffect);\n        }\n        return compiledEffect;\n      }\n      var effect = new Effect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, this, defines, fallbacks, onCompiled, onError, indexParameters, name, shaderLanguage);\n      this._compiledEffects[name] = effect;\n      return effect;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"_compileShader\",\n    value: function _compileShader(source, type, defines, shaderVersion) {\n      return this._compileRawShader(ThinEngine._ConcatenateShader(source, defines, shaderVersion), type);\n    }\n  }, {\n    key: \"_compileRawShader\",\n    value: function _compileRawShader(source, type) {\n      var gl = this._gl;\n      var shader = gl.createShader(type === \"vertex\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n      if (!shader) {\n        var error = gl.NO_ERROR;\n        var tempError = gl.NO_ERROR;\n        while ((tempError = gl.getError()) !== gl.NO_ERROR) {\n          error = tempError;\n        }\n        throw new Error(\"Something went wrong while creating a gl \".concat(type, \" shader object. gl error=\").concat(error, \", gl isContextLost=\").concat(gl.isContextLost(), \", _contextWasLost=\").concat(this._contextWasLost));\n      }\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      return shader;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderSource\",\n    value: function _getShaderSource(shader) {\n      return this._gl.getShaderSource(shader);\n    }\n    /**\n     * Directly creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createRawShaderProgram\",\n    value: function createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      context = context || this._gl;\n      var vertexShader = this._compileRawShader(vertexCode, \"vertex\");\n      var fragmentShader = this._compileRawShader(fragmentCode, \"fragment\");\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode  defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createShaderProgram\",\n    value: function createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context) {\n      var transformFeedbackVaryings = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      context = context || this._gl;\n      var shaderVersion = this._webGLVersion > 1 ? \"#version 300 es\\n#define WEBGL2 \\n\" : \"\";\n      var vertexShader = this._compileShader(vertexCode, \"vertex\", defines, shaderVersion);\n      var fragmentShader = this._compileShader(fragmentCode, \"fragment\", defines, shaderVersion);\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Inline functions in shader code that are marked to be inlined\n     * @param code code to inline\n     * @returns inlined code\n     */\n  }, {\n    key: \"inlineShaderCode\",\n    value: function inlineShaderCode(code) {\n      // no inlining needed in the WebGL engine\n      return code;\n    }\n    /**\n     * Creates a new pipeline context\n     * @param shaderProcessingContext defines the shader processing context used during the processing if available\n     * @returns the new pipeline\n     */\n  }, {\n    key: \"createPipelineContext\",\n    value: function createPipelineContext(shaderProcessingContext) {\n      var pipelineContext = new WebGLPipelineContext();\n      pipelineContext.engine = this;\n      if (this._caps.parallelShaderCompile) {\n        pipelineContext.isParallelCompiled = true;\n      }\n      return pipelineContext;\n    }\n    /**\n     * Creates a new material context\n     * @returns the new context\n     */\n  }, {\n    key: \"createMaterialContext\",\n    value: function createMaterialContext() {\n      return undefined;\n    }\n    /**\n     * Creates a new draw context\n     * @returns the new context\n     */\n  }, {\n    key: \"createDrawContext\",\n    value: function createDrawContext() {\n      return undefined;\n    }\n  }, {\n    key: \"_createShaderProgram\",\n    value: function _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      var shaderProgram = context.createProgram();\n      pipelineContext.program = shaderProgram;\n      if (!shaderProgram) {\n        throw new Error(\"Unable to create program\");\n      }\n      context.attachShader(shaderProgram, vertexShader);\n      context.attachShader(shaderProgram, fragmentShader);\n      context.linkProgram(shaderProgram);\n      pipelineContext.context = context;\n      pipelineContext.vertexShader = vertexShader;\n      pipelineContext.fragmentShader = fragmentShader;\n      if (!pipelineContext.isParallelCompiled) {\n        this._finalizePipelineContext(pipelineContext);\n      }\n      return shaderProgram;\n    }\n  }, {\n    key: \"_finalizePipelineContext\",\n    value: function _finalizePipelineContext(pipelineContext) {\n      var context = pipelineContext.context;\n      var vertexShader = pipelineContext.vertexShader;\n      var fragmentShader = pipelineContext.fragmentShader;\n      var program = pipelineContext.program;\n      var linked = context.getProgramParameter(program, context.LINK_STATUS);\n      if (!linked) {\n        // Get more info\n        // Vertex\n        if (!this._gl.getShaderParameter(vertexShader, this._gl.COMPILE_STATUS)) {\n          var log = this._gl.getShaderInfoLog(vertexShader);\n          if (log) {\n            pipelineContext.vertexCompilationError = log;\n            throw new Error(\"VERTEX SHADER \" + log);\n          }\n        }\n        // Fragment\n        if (!this._gl.getShaderParameter(fragmentShader, this._gl.COMPILE_STATUS)) {\n          var _log = this._gl.getShaderInfoLog(fragmentShader);\n          if (_log) {\n            pipelineContext.fragmentCompilationError = _log;\n            throw new Error(\"FRAGMENT SHADER \" + _log);\n          }\n        }\n        var error = context.getProgramInfoLog(program);\n        if (error) {\n          pipelineContext.programLinkError = error;\n          throw new Error(error);\n        }\n      }\n      if (this.validateShaderPrograms) {\n        context.validateProgram(program);\n        var validated = context.getProgramParameter(program, context.VALIDATE_STATUS);\n        if (!validated) {\n          var _error = context.getProgramInfoLog(program);\n          if (_error) {\n            pipelineContext.programValidationError = _error;\n            throw new Error(_error);\n          }\n        }\n      }\n      context.deleteShader(vertexShader);\n      context.deleteShader(fragmentShader);\n      pipelineContext.vertexShader = undefined;\n      pipelineContext.fragmentShader = undefined;\n      if (pipelineContext.onCompiled) {\n        pipelineContext.onCompiled();\n        pipelineContext.onCompiled = undefined;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_preparePipelineContext\",\n    value: function _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, rawVertexSourceCode, rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, key) {\n      var webGLRenderingState = pipelineContext;\n      if (createAsRaw) {\n        webGLRenderingState.program = this.createRawShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, undefined, transformFeedbackVaryings);\n      } else {\n        webGLRenderingState.program = this.createShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, defines, undefined, transformFeedbackVaryings);\n      }\n      webGLRenderingState.program.__SPECTOR_rebuildProgram = rebuildRebind;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_isRenderingStateCompiled\",\n    value: function _isRenderingStateCompiled(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (this._gl.getProgramParameter(webGLPipelineContext.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)) {\n        this._finalizePipelineContext(webGLPipelineContext);\n        return true;\n      }\n      return false;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_executeWhenRenderingStateIsCompiled\",\n    value: function _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n      var webGLPipelineContext = pipelineContext;\n      if (!webGLPipelineContext.isParallelCompiled) {\n        action();\n        return;\n      }\n      var oldHandler = webGLPipelineContext.onCompiled;\n      if (oldHandler) {\n        webGLPipelineContext.onCompiled = function () {\n          oldHandler();\n          action();\n        };\n      } else {\n        webGLPipelineContext.onCompiled = action;\n      }\n    }\n    /**\n     * Gets the list of webGL uniform locations associated with a specific program based on a list of uniform names\n     * @param pipelineContext defines the pipeline context to use\n     * @param uniformsNames defines the list of uniform names\n     * @returns an array of webGL uniform locations\n     */\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(pipelineContext, uniformsNames) {\n      var results = new Array();\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < uniformsNames.length; index++) {\n        results.push(this._gl.getUniformLocation(webGLPipelineContext.program, uniformsNames[index]));\n      }\n      return results;\n    }\n    /**\n     * Gets the list of active attributes for a given webGL program\n     * @param pipelineContext defines the pipeline context to use\n     * @param attributesNames defines the list of attribute names to get\n     * @returns an array of indices indicating the offset of each attribute\n     */\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(pipelineContext, attributesNames) {\n      var results = [];\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < attributesNames.length; index++) {\n        try {\n          results.push(this._gl.getAttribLocation(webGLPipelineContext.program, attributesNames[index]));\n        } catch (e) {\n          results.push(-1);\n        }\n      }\n      return results;\n    }\n    /**\n     * Activates an effect, making it the current one (ie. the one used for rendering)\n     * @param effect defines the effect to activate\n     */\n  }, {\n    key: \"enableEffect\",\n    value: function enableEffect(effect) {\n      effect = effect !== null && DrawWrapper.IsWrapper(effect) ? effect.effect : effect; // get only the effect, we don't need a Wrapper in the WebGL engine\n      if (!effect || effect === this._currentEffect) {\n        return;\n      }\n      this._stencilStateComposer.stencilMaterial = undefined;\n      effect = effect;\n      // Use program\n      this.bindSamplers(effect);\n      this._currentEffect = effect;\n      if (effect.onBind) {\n        effect.onBind(effect);\n      }\n      if (effect._onBindObservable) {\n        effect._onBindObservable.notifyObservers(effect);\n      }\n    }\n    /**\n     * Set the value of an uniform to a number (int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the int number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt\",\n    value: function setInt(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1i(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt2\",\n    value: function setInt2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2i(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt3\",\n    value: function setInt3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3i(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt4\",\n    value: function setInt4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4i(uniform, x, y, z, w);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray\",\n    value: function setIntArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray2\",\n    value: function setIntArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray3\",\n    value: function setIntArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray4\",\n    value: function setIntArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray\",\n    value: function setArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      if (array.length < 1) {\n        return false;\n      }\n      this._gl.uniform1fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray2\",\n    value: function setArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray3\",\n    value: function setArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray4\",\n    value: function setArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of float32 (stored as matrices)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrices defines the array of float32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrices\",\n    value: function setMatrices(uniform, matrices) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix4fv(uniform, false, matrices);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (3x3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 3x3 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix3x3\",\n    value: function setMatrix3x3(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix3fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (2x2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 2x2 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix2x2\",\n    value: function setMatrix2x2(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix2fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a number (float)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the float number to store\n     * @returns true if the value was transferred\n     */\n  }, {\n    key: \"setFloat\",\n    value: function setFloat(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1f(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat2\",\n    value: function setFloat2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2f(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat3\",\n    value: function setFloat3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3f(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat4\",\n    value: function setFloat4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4f(uniform, x, y, z, w);\n      return true;\n    }\n    // States\n    /**\n     * Apply all cached states (depth, culling, stencil and alpha)\n     */\n  }, {\n    key: \"applyStates\",\n    value: function applyStates() {\n      this._depthCullingState.apply(this._gl);\n      this._stencilStateComposer.apply(this._gl);\n      this._alphaState.apply(this._gl);\n      if (this._colorWriteChanged) {\n        this._colorWriteChanged = false;\n        var enable = this._colorWrite;\n        this._gl.colorMask(enable, enable, enable, enable);\n      }\n    }\n    /**\n     * Enable or disable color writing\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setColorWrite\",\n    value: function setColorWrite(enable) {\n      if (enable !== this._colorWrite) {\n        this._colorWriteChanged = true;\n        this._colorWrite = enable;\n      }\n    }\n    /**\n     * Gets a boolean indicating if color writing is enabled\n     * @returns the current color writing state\n     */\n  }, {\n    key: \"getColorWrite\",\n    value: function getColorWrite() {\n      return this._colorWrite;\n    }\n    /**\n     * Gets the depth culling state manager\n     */\n  }, {\n    key: \"depthCullingState\",\n    get: function get() {\n      return this._depthCullingState;\n    }\n    /**\n     * Gets the alpha state manager\n     */\n  }, {\n    key: \"alphaState\",\n    get: function get() {\n      return this._alphaState;\n    }\n    /**\n     * Gets the stencil state manager\n     */\n  }, {\n    key: \"stencilState\",\n    get: function get() {\n      return this._stencilState;\n    }\n    /**\n     * Gets the stencil state composer\n     */\n  }, {\n    key: \"stencilStateComposer\",\n    get: function get() {\n      return this._stencilStateComposer;\n    }\n    // Textures\n    /**\n     * Clears the list of texture accessible through engine.\n     * This can help preventing texture load conflict due to name collision.\n     */\n  }, {\n    key: \"clearInternalTexturesCache\",\n    value: function clearInternalTexturesCache() {\n      this._internalTexturesCache.length = 0;\n    }\n    /**\n     * Force the entire cache to be cleared\n     * You should not have to use this function unless your engine needs to share the webGL context with another engine\n     * @param bruteForce defines a boolean to force clearing ALL caches (including stencil, detoh and alpha states)\n     */\n  }, {\n    key: \"wipeCaches\",\n    value: function wipeCaches(bruteForce) {\n      if (this.preventCacheWipeBetweenFrames && !bruteForce) {\n        return;\n      }\n      this._currentEffect = null;\n      this._viewportCached.x = 0;\n      this._viewportCached.y = 0;\n      this._viewportCached.z = 0;\n      this._viewportCached.w = 0;\n      // Done before in case we clean the attributes\n      this._unbindVertexArrayObject();\n      if (bruteForce) {\n        this._currentProgram = null;\n        this.resetTextureCache();\n        this._stencilStateComposer.reset();\n        this._depthCullingState.reset();\n        this._depthCullingState.depthFunc = this._gl.LEQUAL;\n        this._alphaState.reset();\n        this._alphaMode = 1;\n        this._alphaEquation = 0;\n        this._colorWrite = true;\n        this._colorWriteChanged = true;\n        this._unpackFlipYCached = null;\n        this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n        this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n        this._mustWipeVertexAttributes = true;\n        this.unbindAllAttributes();\n      }\n      this._resetVertexBufferBinding();\n      this._cachedIndexBuffer = null;\n      this._cachedEffectForVertexBuffers = null;\n      this.bindIndexBuffer(null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getSamplingParameters\",\n    value: function _getSamplingParameters(samplingMode, generateMipMaps) {\n      var gl = this._gl;\n      var magFilter = gl.NEAREST;\n      var minFilter = gl.NEAREST;\n      switch (samplingMode) {\n        case 11:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 3:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 8:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 4:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 5:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 6:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 7:\n          magFilter = gl.NEAREST;\n          minFilter = gl.LINEAR;\n          break;\n        case 1:\n          magFilter = gl.NEAREST;\n          minFilter = gl.NEAREST;\n          break;\n        case 9:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 10:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 2:\n          magFilter = gl.LINEAR;\n          minFilter = gl.LINEAR;\n          break;\n        case 12:\n          magFilter = gl.LINEAR;\n          minFilter = gl.NEAREST;\n          break;\n      }\n      return {\n        min: minFilter,\n        mag: magFilter\n      };\n    }\n    /** @internal */\n  }, {\n    key: \"_createTexture\",\n    value: function _createTexture() {\n      var texture = this._gl.createTexture();\n      if (!texture) {\n        throw new Error(\"Unable to create texture\");\n      }\n      return texture;\n    }\n    /** @internal */\n  }, {\n    key: \"_createHardwareTexture\",\n    value: function _createHardwareTexture() {\n      return new WebGLHardwareTexture(this._createTexture(), this._gl);\n    }\n    /**\n     * Creates an internal texture without binding it to a framebuffer\n     * @internal\n     * @param size defines the size of the texture\n     * @param options defines the options used to create the texture\n     * @param delayGPUTextureCreation true to delay the texture creation the first time it is really needed. false to create it right away\n     * @param source source type of the texture\n     * @returns a new internal texture\n     */\n  }, {\n    key: \"_createInternalTexture\",\n    value: function _createInternalTexture(size, options) {\n      var delayGPUTextureCreation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : InternalTextureSource.Unknown;\n      var _a;\n      var fullOptions = {};\n      if (options !== undefined && typeof options === \"object\") {\n        fullOptions.generateMipMaps = options.generateMipMaps;\n        fullOptions.type = options.type === undefined ? 0 : options.type;\n        fullOptions.samplingMode = options.samplingMode === undefined ? 3 : options.samplingMode;\n        fullOptions.format = options.format === undefined ? 5 : options.format;\n        fullOptions.useSRGBBuffer = options.useSRGBBuffer === undefined ? false : options.useSRGBBuffer;\n        fullOptions.samples = (_a = options.samples) !== null && _a !== void 0 ? _a : 1;\n      } else {\n        fullOptions.generateMipMaps = options;\n        fullOptions.type = 0;\n        fullOptions.samplingMode = 3;\n        fullOptions.format = 5;\n        fullOptions.useSRGBBuffer = false;\n        fullOptions.samples = 1;\n      }\n      fullOptions.useSRGBBuffer = fullOptions.useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU);\n      if (fullOptions.type === 1 && !this._caps.textureFloatLinearFiltering) {\n        // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n        fullOptions.samplingMode = 1;\n      } else if (fullOptions.type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n        // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n        fullOptions.samplingMode = 1;\n      }\n      if (fullOptions.type === 1 && !this._caps.textureFloat) {\n        fullOptions.type = 0;\n        Logger.Warn(\"Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE\");\n      }\n      var gl = this._gl;\n      var texture = new InternalTexture(this, source);\n      texture._useSRGBBuffer = !!fullOptions.useSRGBBuffer;\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      var filters = this._getSamplingParameters(fullOptions.samplingMode, fullOptions.generateMipMaps ? true : false);\n      var target = layers !== 0 ? gl.TEXTURE_2D_ARRAY : gl.TEXTURE_2D;\n      var sizedFormat = this._getRGBABufferInternalSizedFormat(fullOptions.type, fullOptions.format, fullOptions.useSRGBBuffer);\n      var internalFormat = this._getInternalFormat(fullOptions.format);\n      var type = this._getWebGLTextureType(fullOptions.type);\n      // Bind\n      this._bindTextureDirectly(target, texture);\n      if (layers !== 0) {\n        texture.is2DArray = true;\n        gl.texImage3D(target, 0, sizedFormat, width, height, layers, 0, internalFormat, type, null);\n      } else {\n        gl.texImage2D(target, 0, sizedFormat, width, height, 0, internalFormat, type, null);\n      }\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // MipMaps\n      if (fullOptions.generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture.baseWidth = width;\n      texture.baseHeight = height;\n      texture.width = width;\n      texture.height = height;\n      texture.depth = layers;\n      texture.isReady = true;\n      texture.samples = fullOptions.samples;\n      texture.generateMipMaps = fullOptions.generateMipMaps ? true : false;\n      texture.samplingMode = fullOptions.samplingMode;\n      texture.type = fullOptions.type;\n      texture.format = fullOptions.format;\n      this._internalTexturesCache.push(texture);\n      return texture;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getUseSRGBBuffer\",\n    value: function _getUseSRGBBuffer(useSRGBBuffer, noMipmap) {\n      // Generating mipmaps for sRGB textures is not supported in WebGL1 so we must disable the support if mipmaps is enabled\n      return useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU || noMipmap);\n    }\n  }, {\n    key: \"_createTextureBase\",\n    value: function _createTextureBase(url, noMipmap, invertY, scene) {\n      var _this3 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var prepareTexture = arguments.length > 7 ? arguments[7] : undefined;\n      var prepareTextureProcessFunction = arguments.length > 8 ? arguments[8] : undefined;\n      var buffer = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var fallback = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var format = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : null;\n      var forcedExtension = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : null;\n      var mimeType = arguments.length > 13 ? arguments[13] : undefined;\n      var loaderOptions = arguments.length > 14 ? arguments[14] : undefined;\n      var useSRGBBuffer = arguments.length > 15 ? arguments[15] : undefined;\n      url = url || \"\";\n      var fromData = url.substr(0, 5) === \"data:\";\n      var fromBlob = url.substr(0, 5) === \"blob:\";\n      var isBase64 = fromData && url.indexOf(\";base64,\") !== -1;\n      var texture = fallback ? fallback : new InternalTexture(this, InternalTextureSource.Url);\n      var originalUrl = url;\n      if (this._transformTextureUrl && !isBase64 && !fallback && !buffer) {\n        url = this._transformTextureUrl(url);\n      }\n      if (originalUrl !== url) {\n        texture._originalUrl = originalUrl;\n      }\n      // establish the file extension, if possible\n      var lastDot = url.lastIndexOf(\".\");\n      var extension = forcedExtension ? forcedExtension : lastDot > -1 ? url.substring(lastDot).toLowerCase() : \"\";\n      var loader = null;\n      // Remove query string\n      var queryStringIndex = extension.indexOf(\"?\");\n      if (queryStringIndex > -1) {\n        extension = extension.split(\"?\")[0];\n      }\n      var _iterator7 = _createForOfIteratorHelper(ThinEngine._TextureLoaders),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var availableLoader = _step7.value;\n          if (availableLoader.canLoad(extension, mimeType)) {\n            loader = availableLoader;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      if (scene) {\n        scene.addPendingData(texture);\n      }\n      texture.url = url;\n      texture.generateMipMaps = !noMipmap;\n      texture.samplingMode = samplingMode;\n      texture.invertY = invertY;\n      texture._useSRGBBuffer = this._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n      if (!this._doNotHandleContextLost) {\n        // Keep a link to the buffer only if we plan to handle context lost\n        texture._buffer = buffer;\n      }\n      var onLoadObserver = null;\n      if (onLoad && !fallback) {\n        onLoadObserver = texture.onLoadedObservable.add(onLoad);\n      }\n      if (!fallback) {\n        this._internalTexturesCache.push(texture);\n      }\n      var onInternalError = function onInternalError(message, exception) {\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        if (url === originalUrl) {\n          if (onLoadObserver) {\n            texture.onLoadedObservable.remove(onLoadObserver);\n          }\n          if (EngineStore.UseFallbackTexture) {\n            _this3._createTextureBase(EngineStore.FallbackTexture, noMipmap, texture.invertY, scene, samplingMode, null, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture);\n          }\n          message = (message || \"Unknown error\") + (EngineStore.UseFallbackTexture ? \" - Fallback texture was used\" : \"\");\n          texture.onErrorObservable.notifyObservers({\n            message: message,\n            exception: exception\n          });\n          if (onError) {\n            onError(message, exception);\n          }\n        } else {\n          // fall back to the original url if the transformed url fails to load\n          Logger.Warn(\"Failed to load \".concat(url, \", falling back to \").concat(originalUrl));\n          _this3._createTextureBase(originalUrl, noMipmap, texture.invertY, scene, samplingMode, onLoad, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n        }\n      };\n      // processing for non-image formats\n      if (loader) {\n        var callback = function callback(data) {\n          loader.loadData(data, texture, function (width, height, loadMipmap, isCompressed, done, loadFailed) {\n            if (loadFailed) {\n              onInternalError(\"TextureLoader failed to load data\");\n            } else {\n              prepareTexture(texture, extension, scene, {\n                width: width,\n                height: height\n              }, texture.invertY, !loadMipmap, isCompressed, function () {\n                done();\n                return false;\n              }, samplingMode);\n            }\n          }, loaderOptions);\n        };\n        if (!buffer) {\n          this._loadFile(url, function (data) {\n            return callback(new Uint8Array(data));\n          }, undefined, scene ? scene.offlineProvider : undefined, true, function (request, exception) {\n            onInternalError(\"Unable to load \" + (request ? request.responseURL : url, exception));\n          });\n        } else {\n          if (buffer instanceof ArrayBuffer) {\n            callback(new Uint8Array(buffer));\n          } else if (ArrayBuffer.isView(buffer)) {\n            callback(buffer);\n          } else {\n            if (onError) {\n              onError(\"Unable to load: only ArrayBuffer or ArrayBufferView is supported\", null);\n            }\n          }\n        }\n      } else {\n        var onload = function onload(img) {\n          if (fromBlob && !_this3._doNotHandleContextLost) {\n            // We need to store the image if we need to rebuild the texture\n            // in case of a webgl context lost\n            texture._buffer = img;\n          }\n          prepareTexture(texture, extension, scene, img, texture.invertY, noMipmap, false, prepareTextureProcessFunction, samplingMode);\n        };\n        // According to the WebGL spec section 6.10, ImageBitmaps must be inverted on creation.\n        // So, we pass imageOrientation to _FileToolsLoadImage() as it may create an ImageBitmap.\n        if (!fromData || isBase64) {\n          if (buffer && (typeof buffer.decoding === \"string\" || buffer.close)) {\n            onload(buffer);\n          } else {\n            ThinEngine._FileToolsLoadImage(url, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n              imageOrientation: \"flipY\"\n            } : undefined);\n          }\n        } else if (typeof buffer === \"string\" || buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer) || buffer instanceof Blob) {\n          ThinEngine._FileToolsLoadImage(buffer, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n            imageOrientation: \"flipY\"\n          } : undefined);\n        } else if (buffer) {\n          onload(buffer);\n        }\n      }\n      return texture;\n    }\n    /**\n     * Usually called from Texture.ts.\n     * Passed information to create a WebGLTexture\n     * @param url defines a value which contains one of the following:\n     * * A conventional http URL, e.g. 'http://...' or 'file://...'\n     * * A base64 string of in-line texture data, e.g. 'data:image/jpg;base64,/...'\n     * * An indicator that data being passed using the buffer parameter, e.g. 'data:mytexture.jpg'\n     * @param noMipmap defines a boolean indicating that no mipmaps shall be generated.  Ignored for compressed textures.  They must be in the file\n     * @param invertY when true, image is flipped when loaded.  You probably want true. Certain compressed textures may invert this if their default is inverted (eg. ktx)\n     * @param scene needed for loading to the correct scene\n     * @param samplingMode mode with should be used sample / access the texture (Default: Texture.TRILINEAR_SAMPLINGMODE)\n     * @param onLoad optional callback to be called upon successful completion\n     * @param onError optional callback to be called upon failure\n     * @param buffer a source of a file previously fetched as either a base64 string, an ArrayBuffer (compressed or image format), HTMLImageElement (image format), or a Blob\n     * @param fallback an internal argument in case the function must be called again, due to etc1 not having alpha capabilities\n     * @param format internal format.  Default: RGB when extension is '.jpg' else RGBA.  Ignored for compressed textures\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @param mimeType defines an optional mime type\n     * @param loaderOptions options to be passed to the loader\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns a InternalTexture for assignment back into BABYLON.Texture\n     */\n  }, {\n    key: \"createTexture\",\n    value: function createTexture(url, noMipmap, invertY, scene) {\n      var _this4 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var buffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var fallback = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var format = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var forcedExtension = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var mimeType = arguments.length > 11 ? arguments[11] : undefined;\n      var loaderOptions = arguments.length > 12 ? arguments[12] : undefined;\n      var creationFlags = arguments.length > 13 ? arguments[13] : undefined;\n      var useSRGBBuffer = arguments.length > 14 ? arguments[14] : undefined;\n      return this._createTextureBase(url, noMipmap, invertY, scene, samplingMode, onLoad, onError, this._prepareWebGLTexture.bind(this), function (potWidth, potHeight, img, extension, texture, continuationCallback) {\n        var gl = _this4._gl;\n        var isPot = img.width === potWidth && img.height === potHeight;\n        var internalFormat = format ? _this4._getInternalFormat(format, texture._useSRGBBuffer) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : texture._useSRGBBuffer ? gl.SRGB8_ALPHA8 : gl.RGBA;\n        var texelFormat = format ? _this4._getInternalFormat(format) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : gl.RGBA;\n        if (texture._useSRGBBuffer && _this4.webGLVersion === 1) {\n          texelFormat = internalFormat;\n        }\n        if (isPot) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          return false;\n        }\n        var maxTextureSize = _this4._caps.maxTextureSize;\n        if (img.width > maxTextureSize || img.height > maxTextureSize || !_this4._supportsHardwareTextureRescaling) {\n          _this4._prepareWorkingCanvas();\n          if (!_this4._workingCanvas || !_this4._workingContext) {\n            return false;\n          }\n          _this4._workingCanvas.width = potWidth;\n          _this4._workingCanvas.height = potHeight;\n          _this4._workingContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, potWidth, potHeight);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, _this4._workingCanvas);\n          texture.width = potWidth;\n          texture.height = potHeight;\n          return false;\n        } else {\n          // Using shaders when possible to rescale because canvas.drawImage is lossy\n          var source = new InternalTexture(_this4, InternalTextureSource.Temp);\n          _this4._bindTextureDirectly(gl.TEXTURE_2D, source, true);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          _this4._rescaleTexture(source, texture, scene, internalFormat, function () {\n            _this4._releaseTexture(source);\n            _this4._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n            continuationCallback();\n          });\n        }\n        return true;\n      }, buffer, fallback, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n    }\n    /**\n     * Loads an image as an HTMLImageElement.\n     * @param input url string, ArrayBuffer, or Blob to load\n     * @param onLoad callback called when the image successfully loads\n     * @param onError callback called when the image fails to load\n     * @param offlineProvider offline provider for caching\n     * @param mimeType optional mime type\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n     * @returns the HTMLImageElement of the loaded image\n     * @internal\n     */\n  }, {\n    key: \"_rescaleTexture\",\n    value:\n    /**\n     * @internal\n     */\n    function _rescaleTexture(source, destination, scene, internalFormat, onComplete) {}\n    /**\n     * Creates a raw texture\n     * @param data defines the data to store in the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param format defines the format of the data\n     * @param generateMipMaps defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n     * @param compression defines the compression used (null by default)\n     * @param type defines the type fo the data (Engine.TEXTURETYPE_UNSIGNED_INT by default)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns the raw texture inside an InternalTexture\n     */\n  }, {\n    key: \"createRawTexture\",\n    value: function createRawTexture(data, width, height, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var type = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var creationFlags = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      var useSRGBBuffer = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : false;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw cube texture\n     * @param data defines the array of data to use to create each face\n     * @param size defines the size of the textures\n     * @param format defines the format of the data\n     * @param type defines the type of the data (like Engine.TEXTURETYPE_UNSIGNED_INT)\n     * @param generateMipMaps  defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compression used (null by default)\n     * @returns the cube texture as an InternalTexture\n     */\n  }, {\n    key: \"createRawCubeTexture\",\n    value: function createRawCubeTexture(data, size, format, type, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 3D texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the depth of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 3D texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture3D\",\n    value: function createRawTexture3D(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 2D array texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the number of layers of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 2D array texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture2DArray\",\n    value: function createRawTexture2DArray(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_unpackFlipY\",\n    value: function _unpackFlipY(value) {\n      if (this._unpackFlipYCached !== value) {\n        this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, value ? 1 : 0);\n        if (this.enableUnpackFlipYCached) {\n          this._unpackFlipYCached = value;\n        }\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getUnpackAlignement\",\n    value: function _getUnpackAlignement() {\n      return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT);\n    }\n  }, {\n    key: \"_getTextureTarget\",\n    value: function _getTextureTarget(texture) {\n      if (texture.isCube) {\n        return this._gl.TEXTURE_CUBE_MAP;\n      } else if (texture.is3D) {\n        return this._gl.TEXTURE_3D;\n      } else if (texture.is2DArray || texture.isMultiview) {\n        return this._gl.TEXTURE_2D_ARRAY;\n      }\n      return this._gl.TEXTURE_2D;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param samplingMode defines the required sampling mode\n     * @param texture defines the texture to update\n     * @param generateMipMaps defines whether to generate mipmaps for the texture\n     */\n  }, {\n    key: \"updateTextureSamplingMode\",\n    value: function updateTextureSamplingMode(samplingMode, texture) {\n      var generateMipMaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var target = this._getTextureTarget(texture);\n      var filters = this._getSamplingParameters(samplingMode, texture.generateMipMaps || generateMipMaps);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MAG_FILTER, filters.mag, texture);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MIN_FILTER, filters.min);\n      if (generateMipMaps) {\n        texture.generateMipMaps = true;\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture.samplingMode = samplingMode;\n    }\n    /**\n     * Update the dimensions of a texture\n     * @param texture texture to update\n     * @param width new width of the texture\n     * @param height new height of the texture\n     * @param depth new depth of the texture\n     */\n  }, {\n    key: \"updateTextureDimensions\",\n    value: function updateTextureDimensions(texture, width, height) {\n      var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param texture defines the texture to update\n     * @param wrapU defines the texture wrap mode of the u coordinates\n     * @param wrapV defines the texture wrap mode of the v coordinates\n     * @param wrapR defines the texture wrap mode of the r coordinates\n     */\n  }, {\n    key: \"updateTextureWrappingMode\",\n    value: function updateTextureWrappingMode(texture, wrapU) {\n      var wrapV = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var wrapR = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var target = this._getTextureTarget(texture);\n      if (wrapU !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(wrapU), texture);\n        texture._cachedWrapU = wrapU;\n      }\n      if (wrapV !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(wrapV), texture);\n        texture._cachedWrapV = wrapV;\n      }\n      if ((texture.is2DArray || texture.is3D) && wrapR !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(wrapR), texture);\n        texture._cachedWrapR = wrapR;\n      }\n      this._bindTextureDirectly(target, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupDepthStencilTexture\",\n    value: function _setupDepthStencilTexture(internalTexture, size, generateStencil, bilinearFiltering, comparisonFunction) {\n      var samples = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      internalTexture.baseWidth = width;\n      internalTexture.baseHeight = height;\n      internalTexture.width = width;\n      internalTexture.height = height;\n      internalTexture.is2DArray = layers > 0;\n      internalTexture.depth = layers;\n      internalTexture.isReady = true;\n      internalTexture.samples = samples;\n      internalTexture.generateMipMaps = false;\n      internalTexture.samplingMode = bilinearFiltering ? 2 : 1;\n      internalTexture.type = 0;\n      internalTexture._comparisonFunction = comparisonFunction;\n      var gl = this._gl;\n      var target = this._getTextureTarget(internalTexture);\n      var samplingParameters = this._getSamplingParameters(internalTexture.samplingMode, false);\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, samplingParameters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, samplingParameters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // TEXTURE_COMPARE_FUNC/MODE are only availble in WebGL2.\n      if (this.webGLVersion > 1) {\n        if (comparisonFunction === 0) {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, 515);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.NONE);\n        } else {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, comparisonFunction);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadCompressedDataToTextureDirectly\",\n    value: function _uploadCompressedDataToTextureDirectly(texture, internalFormat, width, height, data) {\n      var faceIndex = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var lod = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var gl = this._gl;\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      if (texture._useSRGBBuffer) {\n        switch (internalFormat) {\n          case 37492:\n          case 36196:\n            // Note, if using ETC1 and sRGB is requested, this will use ETC2 if available.\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ETC2;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 37496:\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 36492:\n            internalFormat = gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n            break;\n          case 37808:\n            internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n            break;\n          case 33776:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33777:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33779:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          default:\n            // We don't support a sRGB format corresponding to internalFormat, so revert to non sRGB format\n            texture._useSRGBBuffer = false;\n            break;\n        }\n      }\n      this._gl.compressedTexImage2D(target, lod, internalFormat, width, height, 0, data);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadDataToTextureDirectly\",\n    value: function _uploadDataToTextureDirectly(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var babylonInternalFormat = arguments.length > 4 ? arguments[4] : undefined;\n      var useTextureWidthAndHeight = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      var internalFormat = babylonInternalFormat === undefined ? this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer) : this._getInternalFormat(babylonInternalFormat, texture._useSRGBBuffer);\n      this._unpackFlipY(texture.invertY);\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      var lodMaxWidth = Math.round(Math.log(texture.width) * Math.LOG2E);\n      var lodMaxHeight = Math.round(Math.log(texture.height) * Math.LOG2E);\n      var width = useTextureWidthAndHeight ? texture.width : Math.pow(2, Math.max(lodMaxWidth - lod, 0));\n      var height = useTextureWidthAndHeight ? texture.height : Math.pow(2, Math.max(lodMaxHeight - lod, 0));\n      gl.texImage2D(target, lod, internalFormat, width, height, 0, format, textureType, imageData);\n    }\n    /**\n     * Update a portion of an internal texture\n     * @param texture defines the texture to update\n     * @param imageData defines the data to store into the texture\n     * @param xOffset defines the x coordinates of the update rectangle\n     * @param yOffset defines the y coordinates of the update rectangle\n     * @param width defines the width of the update rectangle\n     * @param height defines the height of the update rectangle\n     * @param faceIndex defines the face index if texture is a cube (0 by default)\n     * @param lod defines the lod level to update (0 by default)\n     * @param generateMipMaps defines whether to generate mipmaps or not\n     */\n  }, {\n    key: \"updateTextureData\",\n    value: function updateTextureData(texture, imageData, xOffset, yOffset, width, height) {\n      var faceIndex = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var lod = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var generateMipMaps = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      this._unpackFlipY(texture.invertY);\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      this._bindTextureDirectly(target, texture, true);\n      gl.texSubImage2D(target, lod, xOffset, yOffset, width, height, format, textureType, imageData);\n      if (generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadArrayBufferViewToTexture\",\n    value: function _uploadArrayBufferViewToTexture(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var gl = this._gl;\n      var bindTarget = texture.isCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n      this._bindTextureDirectly(bindTarget, texture, true);\n      this._uploadDataToTextureDirectly(texture, imageData, faceIndex, lod);\n      this._bindTextureDirectly(bindTarget, null, true);\n    }\n  }, {\n    key: \"_prepareWebGLTextureContinuation\",\n    value: function _prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode) {\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      var filters = this._getSamplingParameters(samplingMode, !noMipmap);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filters.min);\n      if (!noMipmap && !isCompressed) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, null);\n      // this.resetTextureCache();\n      if (scene) {\n        scene.removePendingData(texture);\n      }\n      texture.onLoadedObservable.notifyObservers(texture);\n      texture.onLoadedObservable.clear();\n    }\n  }, {\n    key: \"_prepareWebGLTexture\",\n    value: function _prepareWebGLTexture(texture, extension, scene, img, invertY, noMipmap, isCompressed, processFunction) {\n      var _this5 = this;\n      var samplingMode = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 3;\n      var maxTextureSize = this.getCaps().maxTextureSize;\n      var potWidth = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.width, maxTextureSize) : img.width);\n      var potHeight = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.height, maxTextureSize) : img.height);\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      if (!texture._hardwareTexture) {\n        //  this.resetTextureCache();\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        return;\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n      this._unpackFlipY(invertY === undefined ? true : invertY ? true : false);\n      texture.baseWidth = img.width;\n      texture.baseHeight = img.height;\n      texture.width = potWidth;\n      texture.height = potHeight;\n      texture.isReady = true;\n      if (processFunction(potWidth, potHeight, img, extension, texture, function () {\n        _this5._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n      })) {\n        // Returning as texture needs extra async steps\n        return;\n      }\n      this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupFramebufferDepthAttachments\",\n    value: function _setupFramebufferDepthAttachments(generateStencilBuffer, generateDepthBuffer, width, height) {\n      var samples = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n      var gl = this._gl;\n      // Create the depth/stencil buffer\n      if (generateStencilBuffer && generateDepthBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.DEPTH_STENCIL, gl.DEPTH24_STENCIL8, gl.DEPTH_STENCIL_ATTACHMENT);\n      }\n      if (generateDepthBuffer) {\n        var depthFormat = gl.DEPTH_COMPONENT16;\n        if (this._webGLVersion > 1) {\n          depthFormat = gl.DEPTH_COMPONENT32F;\n        }\n        return this._createRenderBuffer(width, height, samples, depthFormat, depthFormat, gl.DEPTH_ATTACHMENT);\n      }\n      if (generateStencilBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.STENCIL_INDEX8, gl.STENCIL_INDEX8, gl.STENCIL_ATTACHMENT);\n      }\n      return null;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_createRenderBuffer\",\n    value: function _createRenderBuffer(width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n      var gl = this._gl;\n      var renderBuffer = gl.createRenderbuffer();\n      return this._updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer);\n    }\n  }, {\n    key: \"_updateRenderBuffer\",\n    value: function _updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n      var gl = this._gl;\n      gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n      if (samples > 1 && gl.renderbufferStorageMultisample) {\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, samples, msInternalFormat, width, height);\n      } else {\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n      }\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, renderBuffer);\n      if (unbindBuffer) {\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n      }\n      return renderBuffer;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseTexture\",\n    value: function _releaseTexture(texture) {\n      var _a;\n      this._deleteTexture((_a = texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource);\n      // Unbind channels\n      this.unbindAllTextures();\n      var index = this._internalTexturesCache.indexOf(texture);\n      if (index !== -1) {\n        this._internalTexturesCache.splice(index, 1);\n      }\n      // Integrated fixed lod samplers.\n      if (texture._lodTextureHigh) {\n        texture._lodTextureHigh.dispose();\n      }\n      if (texture._lodTextureMid) {\n        texture._lodTextureMid.dispose();\n      }\n      if (texture._lodTextureLow) {\n        texture._lodTextureLow.dispose();\n      }\n      // Integrated irradiance map.\n      if (texture._irradianceTexture) {\n        texture._irradianceTexture.dispose();\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseRenderTargetWrapper\",\n    value: function _releaseRenderTargetWrapper(rtWrapper) {\n      var index = this._renderTargetWrapperCache.indexOf(rtWrapper);\n      if (index !== -1) {\n        this._renderTargetWrapperCache.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"_deleteTexture\",\n    value: function _deleteTexture(texture) {\n      if (texture) {\n        this._gl.deleteTexture(texture);\n      }\n    }\n  }, {\n    key: \"_setProgram\",\n    value: function _setProgram(program) {\n      if (this._currentProgram !== program) {\n        this._gl.useProgram(program);\n        this._currentProgram = program;\n      }\n    }\n    /**\n     * Binds an effect to the webGL context\n     * @param effect defines the effect to bind\n     */\n  }, {\n    key: \"bindSamplers\",\n    value: function bindSamplers(effect) {\n      var webGLPipelineContext = effect.getPipelineContext();\n      this._setProgram(webGLPipelineContext.program);\n      var samplers = effect.getSamplers();\n      for (var index = 0; index < samplers.length; index++) {\n        var uniform = effect.getUniform(samplers[index]);\n        if (uniform) {\n          this._boundUniforms[index] = uniform;\n        }\n      }\n      this._currentEffect = null;\n    }\n  }, {\n    key: \"_activateCurrentTexture\",\n    value: function _activateCurrentTexture() {\n      if (this._currentTextureChannel !== this._activeChannel) {\n        this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel);\n        this._currentTextureChannel = this._activeChannel;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTextureDirectly\",\n    value: function _bindTextureDirectly(target, texture) {\n      var forTextureDataUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var force = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var _a, _b;\n      var wasPreviouslyBound = false;\n      var isTextureForRendering = texture && texture._associatedChannel > -1;\n      if (forTextureDataUpdate && isTextureForRendering) {\n        this._activeChannel = texture._associatedChannel;\n      }\n      var currentTextureBound = this._boundTexturesCache[this._activeChannel];\n      if (currentTextureBound !== texture || force) {\n        this._activateCurrentTexture();\n        if (texture && texture.isMultiview) {\n          //this._gl.bindTexture(target, texture ? texture._colorTextureArray : null);\n          console.error(target, texture);\n          throw \"_bindTextureDirectly called with a multiview texture!\";\n        } else {\n          this._gl.bindTexture(target, (_b = (_a = texture === null || texture === void 0 ? void 0 : texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource) !== null && _b !== void 0 ? _b : null);\n        }\n        this._boundTexturesCache[this._activeChannel] = texture;\n        if (texture) {\n          texture._associatedChannel = this._activeChannel;\n        }\n      } else if (forTextureDataUpdate) {\n        wasPreviouslyBound = true;\n        this._activateCurrentTexture();\n      }\n      if (isTextureForRendering && !forTextureDataUpdate) {\n        this._bindSamplerUniformToChannel(texture._associatedChannel, this._activeChannel);\n      }\n      return wasPreviouslyBound;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTexture\",\n    value: function _bindTexture(channel, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (texture) {\n        texture._associatedChannel = channel;\n      }\n      this._activeChannel = channel;\n      var target = texture ? this._getTextureTarget(texture) : this._gl.TEXTURE_2D;\n      this._bindTextureDirectly(target, texture);\n    }\n    /**\n     * Unbind all textures from the webGL context\n     */\n  }, {\n    key: \"unbindAllTextures\",\n    value: function unbindAllTextures() {\n      for (var channel = 0; channel < this._maxSimultaneousTextures; channel++) {\n        this._activeChannel = channel;\n        this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n        this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n        if (this.webGLVersion > 1) {\n          this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n        }\n      }\n    }\n    /**\n     * Sets a texture to the according uniform.\n     * @param channel The texture channel\n     * @param uniform The uniform to set\n     * @param texture The texture to apply\n     * @param name The name of the uniform in the effect\n     */\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(channel, uniform, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (uniform) {\n        this._boundUniforms[channel] = uniform;\n      }\n      this._setTexture(channel, texture);\n    }\n  }, {\n    key: \"_bindSamplerUniformToChannel\",\n    value: function _bindSamplerUniformToChannel(sourceSlot, destination) {\n      var uniform = this._boundUniforms[sourceSlot];\n      if (!uniform || uniform._currentState === destination) {\n        return;\n      }\n      this._gl.uniform1i(uniform, destination);\n      uniform._currentState = destination;\n    }\n  }, {\n    key: \"_getTextureWrapMode\",\n    value: function _getTextureWrapMode(mode) {\n      switch (mode) {\n        case 1:\n          return this._gl.REPEAT;\n        case 0:\n          return this._gl.CLAMP_TO_EDGE;\n        case 2:\n          return this._gl.MIRRORED_REPEAT;\n      }\n      return this._gl.REPEAT;\n    }\n  }, {\n    key: \"_setTexture\",\n    value: function _setTexture(channel, texture) {\n      var isPartOfTextureArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var depthStencilTexture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var name = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"\";\n      // Not ready?\n      if (!texture) {\n        if (this._boundTexturesCache[channel] != null) {\n          this._activeChannel = channel;\n          this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n          if (this.webGLVersion > 1) {\n            this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n            this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n          }\n        }\n        return false;\n      }\n      // Video\n      if (texture.video) {\n        this._activeChannel = channel;\n        texture.update();\n      } else if (texture.delayLoadState === 4) {\n        // Delay loading\n        texture.delayLoad();\n        return false;\n      }\n      var internalTexture;\n      if (depthStencilTexture) {\n        internalTexture = texture.depthStencilTexture;\n      } else if (texture.isReady()) {\n        internalTexture = texture.getInternalTexture();\n      } else if (texture.isCube) {\n        internalTexture = this.emptyCubeTexture;\n      } else if (texture.is3D) {\n        internalTexture = this.emptyTexture3D;\n      } else if (texture.is2DArray) {\n        internalTexture = this.emptyTexture2DArray;\n      } else {\n        internalTexture = this.emptyTexture;\n      }\n      if (!isPartOfTextureArray && internalTexture) {\n        internalTexture._associatedChannel = channel;\n      }\n      var needToBind = true;\n      if (this._boundTexturesCache[channel] === internalTexture) {\n        if (!isPartOfTextureArray) {\n          this._bindSamplerUniformToChannel(internalTexture._associatedChannel, channel);\n        }\n        needToBind = false;\n      }\n      this._activeChannel = channel;\n      var target = this._getTextureTarget(internalTexture);\n      if (needToBind) {\n        this._bindTextureDirectly(target, internalTexture, isPartOfTextureArray);\n      }\n      if (internalTexture && !internalTexture.isMultiview) {\n        // CUBIC_MODE and SKYBOX_MODE both require CLAMP_TO_EDGE.  All other modes use REPEAT.\n        if (internalTexture.isCube && internalTexture._cachedCoordinatesMode !== texture.coordinatesMode) {\n          internalTexture._cachedCoordinatesMode = texture.coordinatesMode;\n          var textureWrapMode = texture.coordinatesMode !== 3 && texture.coordinatesMode !== 5 ? 1 : 0;\n          texture.wrapU = textureWrapMode;\n          texture.wrapV = textureWrapMode;\n        }\n        if (internalTexture._cachedWrapU !== texture.wrapU) {\n          internalTexture._cachedWrapU = texture.wrapU;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(texture.wrapU), internalTexture);\n        }\n        if (internalTexture._cachedWrapV !== texture.wrapV) {\n          internalTexture._cachedWrapV = texture.wrapV;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(texture.wrapV), internalTexture);\n        }\n        if (internalTexture.is3D && internalTexture._cachedWrapR !== texture.wrapR) {\n          internalTexture._cachedWrapR = texture.wrapR;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(texture.wrapR), internalTexture);\n        }\n        this._setAnisotropicLevel(target, internalTexture, texture.anisotropicFilteringLevel);\n      }\n      return true;\n    }\n    /**\n     * Sets an array of texture to the webGL context\n     * @param channel defines the channel where the texture array must be set\n     * @param uniform defines the associated uniform location\n     * @param textures defines the array of textures to bind\n     * @param name name of the channel\n     */\n  }, {\n    key: \"setTextureArray\",\n    value: function setTextureArray(channel, uniform, textures, name) {\n      if (channel === undefined || !uniform) {\n        return;\n      }\n      if (!this._textureUnits || this._textureUnits.length !== textures.length) {\n        this._textureUnits = new Int32Array(textures.length);\n      }\n      for (var i = 0; i < textures.length; i++) {\n        var texture = textures[i].getInternalTexture();\n        if (texture) {\n          this._textureUnits[i] = channel + i;\n          texture._associatedChannel = channel + i;\n        } else {\n          this._textureUnits[i] = -1;\n        }\n      }\n      this._gl.uniform1iv(uniform, this._textureUnits);\n      for (var index = 0; index < textures.length; index++) {\n        this._setTexture(this._textureUnits[index], textures[index], true);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setAnisotropicLevel\",\n    value: function _setAnisotropicLevel(target, internalTexture, anisotropicFilteringLevel) {\n      var anisotropicFilterExtension = this._caps.textureAnisotropicFilterExtension;\n      if (internalTexture.samplingMode !== 11 && internalTexture.samplingMode !== 3 && internalTexture.samplingMode !== 2) {\n        anisotropicFilteringLevel = 1; // Forcing the anisotropic to 1 because else webgl will force filters to linear\n      }\n\n      if (anisotropicFilterExtension && internalTexture._cachedAnisotropicFilteringLevel !== anisotropicFilteringLevel) {\n        this._setTextureParameterFloat(target, anisotropicFilterExtension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(anisotropicFilteringLevel, this._caps.maxAnisotropy), internalTexture);\n        internalTexture._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n      }\n    }\n  }, {\n    key: \"_setTextureParameterFloat\",\n    value: function _setTextureParameterFloat(target, parameter, value, texture) {\n      this._bindTextureDirectly(target, texture, true, true);\n      this._gl.texParameterf(target, parameter, value);\n    }\n  }, {\n    key: \"_setTextureParameterInteger\",\n    value: function _setTextureParameterInteger(target, parameter, value, texture) {\n      if (texture) {\n        this._bindTextureDirectly(target, texture, true, true);\n      }\n      this._gl.texParameteri(target, parameter, value);\n    }\n    /**\n     * Unbind all vertex attributes from the webGL context\n     */\n  }, {\n    key: \"unbindAllAttributes\",\n    value: function unbindAllAttributes() {\n      if (this._mustWipeVertexAttributes) {\n        this._mustWipeVertexAttributes = false;\n        for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n          this.disableAttributeByIndex(i);\n        }\n        return;\n      }\n      for (var _i2 = 0, ul = this._vertexAttribArraysEnabled.length; _i2 < ul; _i2++) {\n        if (_i2 >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[_i2]) {\n          continue;\n        }\n        this.disableAttributeByIndex(_i2);\n      }\n    }\n    /**\n     * Force the engine to release all cached effects. This means that next effect compilation will have to be done completely even if a similar effect was already compiled\n     */\n  }, {\n    key: \"releaseEffects\",\n    value: function releaseEffects() {\n      for (var name in this._compiledEffects) {\n        var webGLPipelineContext = this._compiledEffects[name].getPipelineContext();\n        this._deletePipelineContext(webGLPipelineContext);\n      }\n      this._compiledEffects = {};\n    }\n    /**\n     * Dispose and release all associated resources\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _a;\n      this.stopRenderLoop();\n      // Clear observables\n      if (this.onBeforeTextureInitObservable) {\n        this.onBeforeTextureInitObservable.clear();\n      }\n      // Empty texture\n      if (this._emptyTexture) {\n        this._releaseTexture(this._emptyTexture);\n        this._emptyTexture = null;\n      }\n      if (this._emptyCubeTexture) {\n        this._releaseTexture(this._emptyCubeTexture);\n        this._emptyCubeTexture = null;\n      }\n      if (this._dummyFramebuffer) {\n        this._gl.deleteFramebuffer(this._dummyFramebuffer);\n      }\n      // Release effects\n      this.releaseEffects();\n      (_a = this.releaseComputeEffects) === null || _a === void 0 ? void 0 : _a.call(this);\n      // Unbind\n      this.unbindAllAttributes();\n      this._boundUniforms = {};\n      // Events\n      if (IsWindowObjectExist()) {\n        if (this._renderingCanvas) {\n          if (!this._doNotHandleContextLost) {\n            this._renderingCanvas.removeEventListener(\"webglcontextlost\", this._onContextLost);\n            this._renderingCanvas.removeEventListener(\"webglcontextrestored\", this._onContextRestored);\n          }\n          window.removeEventListener(\"resize\", this._checkForMobile);\n        }\n      }\n      this._workingCanvas = null;\n      this._workingContext = null;\n      this._currentBufferPointers.length = 0;\n      this._renderingCanvas = null;\n      this._currentProgram = null;\n      this._boundRenderFunction = null;\n      Effect.ResetCache();\n      // Abort active requests\n      var _iterator8 = _createForOfIteratorHelper(this._activeRequests),\n        _step8;\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var request = _step8.value;\n          request.abort();\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n      this.onDisposeObservable.notifyObservers(this);\n      this.onDisposeObservable.clear();\n    }\n    /**\n     * Attach a new callback raised when context lost event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextLostEvent\",\n    value: function attachContextLostEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextlost\", callback, false);\n      }\n    }\n    /**\n     * Attach a new callback raised when context restored event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextRestoredEvent\",\n    value: function attachContextRestoredEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextrestored\", callback, false);\n      }\n    }\n    /**\n     * Get the current error code of the webGL context\n     * @returns the error code\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/getError\n     */\n  }, {\n    key: \"getError\",\n    value: function getError() {\n      return this._gl.getError();\n    }\n  }, {\n    key: \"_canRenderToFloatFramebuffer\",\n    value: function _canRenderToFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(1);\n    }\n  }, {\n    key: \"_canRenderToHalfFloatFramebuffer\",\n    value: function _canRenderToHalfFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(2);\n    }\n    // Thank you : http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n  }, {\n    key: \"_canRenderToFramebuffer\",\n    value: function _canRenderToFramebuffer(type) {\n      var gl = this._gl;\n      //clear existing errors\n      // eslint-disable-next-line no-empty\n      while (gl.getError() !== gl.NO_ERROR) {}\n      var successful = true;\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(type), 1, 1, 0, gl.RGBA, this._getWebGLTextureType(type), null);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      var fb = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n      var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n      successful = successful && status === gl.FRAMEBUFFER_COMPLETE;\n      successful = successful && gl.getError() === gl.NO_ERROR;\n      //try render by clearing frame buffer's color buffer\n      if (successful) {\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //try reading from frame to ensure render occurs (just creating the FBO is not sufficient to determine if rendering is supported)\n      if (successful) {\n        //in practice it's sufficient to just read from the backbuffer rather than handle potentially issues reading from the texture\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        var readFormat = gl.RGBA;\n        var readType = gl.UNSIGNED_BYTE;\n        var buffer = new Uint8Array(4);\n        gl.readPixels(0, 0, 1, 1, readFormat, readType, buffer);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //clean up\n      gl.deleteTexture(texture);\n      gl.deleteFramebuffer(fb);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      //clear accumulated errors\n      // eslint-disable-next-line no-empty\n      while (!successful && gl.getError() !== gl.NO_ERROR) {}\n      return successful;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getWebGLTextureType\",\n    value: function _getWebGLTextureType(type) {\n      if (this._webGLVersion === 1) {\n        switch (type) {\n          case 1:\n            return this._gl.FLOAT;\n          case 2:\n            return this._gl.HALF_FLOAT_OES;\n          case 0:\n            return this._gl.UNSIGNED_BYTE;\n          case 8:\n            return this._gl.UNSIGNED_SHORT_4_4_4_4;\n          case 9:\n            return this._gl.UNSIGNED_SHORT_5_5_5_1;\n          case 10:\n            return this._gl.UNSIGNED_SHORT_5_6_5;\n        }\n        return this._gl.UNSIGNED_BYTE;\n      }\n      switch (type) {\n        case 3:\n          return this._gl.BYTE;\n        case 0:\n          return this._gl.UNSIGNED_BYTE;\n        case 4:\n          return this._gl.SHORT;\n        case 5:\n          return this._gl.UNSIGNED_SHORT;\n        case 6:\n          return this._gl.INT;\n        case 7:\n          // Refers to UNSIGNED_INT\n          return this._gl.UNSIGNED_INT;\n        case 1:\n          return this._gl.FLOAT;\n        case 2:\n          return this._gl.HALF_FLOAT;\n        case 8:\n          return this._gl.UNSIGNED_SHORT_4_4_4_4;\n        case 9:\n          return this._gl.UNSIGNED_SHORT_5_5_5_1;\n        case 10:\n          return this._gl.UNSIGNED_SHORT_5_6_5;\n        case 11:\n          return this._gl.UNSIGNED_INT_2_10_10_10_REV;\n        case 12:\n          return this._gl.UNSIGNED_INT_24_8;\n        case 13:\n          return this._gl.UNSIGNED_INT_10F_11F_11F_REV;\n        case 14:\n          return this._gl.UNSIGNED_INT_5_9_9_9_REV;\n        case 15:\n          return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n      }\n      return this._gl.UNSIGNED_BYTE;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getInternalFormat\",\n    value: function _getInternalFormat(format) {\n      var useSRGBBuffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n      switch (format) {\n        case 0:\n          internalFormat = this._gl.ALPHA;\n          break;\n        case 1:\n          internalFormat = this._gl.LUMINANCE;\n          break;\n        case 2:\n          internalFormat = this._gl.LUMINANCE_ALPHA;\n          break;\n        case 6:\n          internalFormat = this._gl.RED;\n          break;\n        case 7:\n          internalFormat = this._gl.RG;\n          break;\n        case 4:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          break;\n        case 5:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n          break;\n      }\n      if (this._webGLVersion > 1) {\n        switch (format) {\n          case 8:\n            internalFormat = this._gl.RED_INTEGER;\n            break;\n          case 9:\n            internalFormat = this._gl.RG_INTEGER;\n            break;\n          case 10:\n            internalFormat = this._gl.RGB_INTEGER;\n            break;\n          case 11:\n            internalFormat = this._gl.RGBA_INTEGER;\n            break;\n        }\n      }\n      return internalFormat;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBABufferInternalSizedFormat\",\n    value: function _getRGBABufferInternalSizedFormat(type, format) {\n      var useSRGBBuffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (this._webGLVersion === 1) {\n        if (format !== undefined) {\n          switch (format) {\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          }\n        }\n        return this._gl.RGBA;\n      }\n      switch (type) {\n        case 3:\n          switch (format) {\n            case 6:\n              return this._gl.R8_SNORM;\n            case 7:\n              return this._gl.RG8_SNORM;\n            case 4:\n              return this._gl.RGB8_SNORM;\n            case 8:\n              return this._gl.R8I;\n            case 9:\n              return this._gl.RG8I;\n            case 10:\n              return this._gl.RGB8I;\n            case 11:\n              return this._gl.RGBA8I;\n            default:\n              return this._gl.RGBA8_SNORM;\n          }\n        case 0:\n          switch (format) {\n            case 6:\n              return this._gl.R8;\n            case 7:\n              return this._gl.RG8;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB8 : this._gl.RGB8;\n            // By default. Other possibilities are RGB565, SRGB8.\n            case 5:\n              return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n            // By default. Other possibilities are RGB5_A1, RGBA4, SRGB8_ALPHA8.\n            case 8:\n              return this._gl.R8UI;\n            case 9:\n              return this._gl.RG8UI;\n            case 10:\n              return this._gl.RGB8UI;\n            case 11:\n              return this._gl.RGBA8UI;\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            default:\n              return this._gl.RGBA8;\n          }\n        case 4:\n          switch (format) {\n            case 8:\n              return this._gl.R16I;\n            case 9:\n              return this._gl.RG16I;\n            case 10:\n              return this._gl.RGB16I;\n            case 11:\n              return this._gl.RGBA16I;\n            default:\n              return this._gl.RGBA16I;\n          }\n        case 5:\n          switch (format) {\n            case 8:\n              return this._gl.R16UI;\n            case 9:\n              return this._gl.RG16UI;\n            case 10:\n              return this._gl.RGB16UI;\n            case 11:\n              return this._gl.RGBA16UI;\n            default:\n              return this._gl.RGBA16UI;\n          }\n        case 6:\n          switch (format) {\n            case 8:\n              return this._gl.R32I;\n            case 9:\n              return this._gl.RG32I;\n            case 10:\n              return this._gl.RGB32I;\n            case 11:\n              return this._gl.RGBA32I;\n            default:\n              return this._gl.RGBA32I;\n          }\n        case 7:\n          // Refers to UNSIGNED_INT\n          switch (format) {\n            case 8:\n              return this._gl.R32UI;\n            case 9:\n              return this._gl.RG32UI;\n            case 10:\n              return this._gl.RGB32UI;\n            case 11:\n              return this._gl.RGBA32UI;\n            default:\n              return this._gl.RGBA32UI;\n          }\n        case 1:\n          switch (format) {\n            case 6:\n              return this._gl.R32F;\n            // By default. Other possibility is R16F.\n            case 7:\n              return this._gl.RG32F;\n            // By default. Other possibility is RG16F.\n            case 4:\n              return this._gl.RGB32F;\n            // By default. Other possibilities are RGB16F, R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA32F;\n            // By default. Other possibility is RGBA16F.\n            default:\n              return this._gl.RGBA32F;\n          }\n        case 2:\n          switch (format) {\n            case 6:\n              return this._gl.R16F;\n            case 7:\n              return this._gl.RG16F;\n            case 4:\n              return this._gl.RGB16F;\n            // By default. Other possibilities are R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA16F;\n            default:\n              return this._gl.RGBA16F;\n          }\n        case 10:\n          return this._gl.RGB565;\n        case 13:\n          return this._gl.R11F_G11F_B10F;\n        case 14:\n          return this._gl.RGB9_E5;\n        case 8:\n          return this._gl.RGBA4;\n        case 9:\n          return this._gl.RGB5_A1;\n        case 11:\n          switch (format) {\n            case 5:\n              return this._gl.RGB10_A2;\n            // By default. Other possibility is RGB5_A1.\n            case 11:\n              return this._gl.RGB10_A2UI;\n            default:\n              return this._gl.RGB10_A2;\n          }\n      }\n      return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBAMultiSampleBufferFormat\",\n    value: function _getRGBAMultiSampleBufferFormat(type) {\n      if (type === 1) {\n        return this._gl.RGBA32F;\n      } else if (type === 2) {\n        return this._gl.RGBA16F;\n      }\n      return this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_loadFile\",\n    value: function _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      var _this6 = this;\n      var request = ThinEngine._FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this6._activeRequests.splice(_this6._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * Loads a file from a url\n     * @param url url to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     * @internal\n     */\n  }, {\n    key: \"readPixels\",\n    value:\n    /**\n     * Reads pixels from the current frame buffer. Please note that this function can be slow\n     * @param x defines the x coordinate of the rectangle where pixels must be read\n     * @param y defines the y coordinate of the rectangle where pixels must be read\n     * @param width defines the width of the rectangle where pixels must be read\n     * @param height defines the height of the rectangle where pixels must be read\n     * @param hasAlpha defines whether the output should have alpha or not (defaults to true)\n     * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n     * @returns a ArrayBufferView promise (Uint8Array) containing RGBA colors\n     */\n    function readPixels(x, y, width, height) {\n      var hasAlpha = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var flushRenderer = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n      var numChannels = hasAlpha ? 4 : 3;\n      var format = hasAlpha ? this._gl.RGBA : this._gl.RGB;\n      var data = new Uint8Array(height * width * numChannels);\n      if (flushRenderer) {\n        this.flushFramebuffer();\n      }\n      this._gl.readPixels(x, y, width, height, format, this._gl.UNSIGNED_BYTE, data);\n      return Promise.resolve(data);\n    }\n    /**\n     * Gets a Promise<boolean> indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"getHostDocument\",\n    value:\n    /**\n     * Gets host document\n     * @returns the host document object\n     */\n    function getHostDocument() {\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument) {\n        return this._renderingCanvas.ownerDocument;\n      }\n      return IsDocumentAvailable() ? document : null;\n    }\n  }], [{\n    key: \"NpmPackage\",\n    get: function get() {\n      return \"babylonjs@5.30.0\";\n    }\n    /**\n     * Returns the current version of the framework\n     */\n  }, {\n    key: \"Version\",\n    get: function get() {\n      return \"5.30.0\";\n    }\n  }, {\n    key: \"ShadersRepository\",\n    get: function get() {\n      return Effect.ShadersRepository;\n    },\n    set: function set(value) {\n      Effect.ShadersRepository = value;\n    }\n  }, {\n    key: \"_CreateCanvas\",\n    value: function _CreateCanvas(width, height) {\n      if (typeof document === \"undefined\") {\n        return new OffscreenCanvas(width, height);\n      }\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n  }, {\n    key: \"_ConcatenateShader\",\n    value: function _ConcatenateShader(source, defines) {\n      var shaderVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      return shaderVersion + (defines ? defines + \"\\n\" : \"\") + source;\n    }\n  }, {\n    key: \"_FileToolsLoadImage\",\n    value: function _FileToolsLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"_FileToolsLoadFile\",\n    value: function _FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"IsSupportedAsync\",\n    get: function get() {\n      return Promise.resolve(this.isSupported());\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"IsSupported\",\n    get: function get() {\n      return this.isSupported(); // Backward compat\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     * @returns true if the engine can be created\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      if (this._HasMajorPerformanceCaveat !== null) {\n        return !this._HasMajorPerformanceCaveat; // We know it is performant so WebGL is supported\n      }\n\n      if (this._IsSupported === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\") || tempcanvas.getContext(\"experimental-webgl\");\n          this._IsSupported = gl != null && !!window.WebGLRenderingContext;\n        } catch (e) {\n          this._IsSupported = false;\n        }\n      }\n      return this._IsSupported;\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated on a performant device (ie. if a webGL context can be found and it does not use a slow implementation)\n     */\n  }, {\n    key: \"HasMajorPerformanceCaveat\",\n    get: function get() {\n      if (this._HasMajorPerformanceCaveat === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\", {\n            failIfMajorPerformanceCaveat: true\n          }) || tempcanvas.getContext(\"experimental-webgl\", {\n            failIfMajorPerformanceCaveat: true\n          });\n          this._HasMajorPerformanceCaveat = !gl;\n        } catch (e) {\n          this._HasMajorPerformanceCaveat = false;\n        }\n      }\n      return this._HasMajorPerformanceCaveat;\n    }\n    /**\n     * Find the next highest power of two.\n     * @param x Number to start search from.\n     * @returns Next highest power of two.\n     */\n  }, {\n    key: \"CeilingPOT\",\n    value: function CeilingPOT(x) {\n      x--;\n      x |= x >> 1;\n      x |= x >> 2;\n      x |= x >> 4;\n      x |= x >> 8;\n      x |= x >> 16;\n      x++;\n      return x;\n    }\n    /**\n     * Find the next lowest power of two.\n     * @param x Number to start search from.\n     * @returns Next lowest power of two.\n     */\n  }, {\n    key: \"FloorPOT\",\n    value: function FloorPOT(x) {\n      x = x | x >> 1;\n      x = x | x >> 2;\n      x = x | x >> 4;\n      x = x | x >> 8;\n      x = x | x >> 16;\n      return x - (x >> 1);\n    }\n    /**\n     * Find the nearest power of two.\n     * @param x Number to start search from.\n     * @returns Next nearest power of two.\n     */\n  }, {\n    key: \"NearestPOT\",\n    value: function NearestPOT(x) {\n      var c = ThinEngine.CeilingPOT(x);\n      var f = ThinEngine.FloorPOT(x);\n      return c - x > x - f ? f : c;\n    }\n    /**\n     * Get the closest exponent of two\n     * @param value defines the value to approximate\n     * @param max defines the maximum value to return\n     * @param mode defines how to define the closest value\n     * @returns closest exponent of two of the given value\n     */\n  }, {\n    key: \"GetExponentOfTwo\",\n    value: function GetExponentOfTwo(value, max) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n      var pot;\n      switch (mode) {\n        case 1:\n          pot = ThinEngine.FloorPOT(value);\n          break;\n        case 2:\n          pot = ThinEngine.NearestPOT(value);\n          break;\n        case 3:\n        default:\n          pot = ThinEngine.CeilingPOT(value);\n          break;\n      }\n      return Math.min(pot, max);\n    }\n    /**\n     * Queue a new function into the requested animation frame pool (ie. this function will be executed byt the browser for the next frame)\n     * @param func - the function to be called\n     * @param requester - the object that will request the next frame. Falls back to window.\n     * @returns frame number\n     */\n  }, {\n    key: \"QueueNewFrame\",\n    value: function QueueNewFrame(func, requester) {\n      if (!IsWindowObjectExist()) {\n        if (typeof requestAnimationFrame !== \"undefined\") {\n          return requestAnimationFrame(func);\n        }\n        return setTimeout(func, 16);\n      }\n      if (!requester) {\n        requester = window;\n      }\n      if (requester.requestPostAnimationFrame) {\n        return requester.requestPostAnimationFrame(func);\n      } else if (requester.requestAnimationFrame) {\n        return requester.requestAnimationFrame(func);\n      } else {\n        return window.setTimeout(func, 16);\n      }\n    }\n  }]);\n  return ThinEngine;\n}();\n/** Use this array to turn off some WebGL2 features on known buggy browsers version */\nThinEngine.ExceptionList = [{\n  key: \"Chrome/63.0\",\n  capture: \"63\\\\.0\\\\.3239\\\\.(\\\\d+)\",\n  captureConstraint: 108,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/58\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/59\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Chrome/72.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/73.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/74.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/71\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/72\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n},\n// desktop osx safari 15.4\n{\n  key: \".*AppleWebKit.*(15.4).*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n},\n// mobile browsers using safari 15.4 on ios\n{\n  key: \".*(15.4).*AppleWebKit.*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n}];\n/** @internal */\nThinEngine._TextureLoaders = [];\n// Updatable statics so stick with vars here\n/**\n * Gets or sets the epsilon value used by collision engine\n */\nThinEngine.CollisionsEpsilon = 0.001;\n// Statics\nThinEngine._IsSupported = null;\nThinEngine._HasMajorPerformanceCaveat = null;"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e2","f","TypeError","err","normalCompletion","didErr","step","next","_e3","return","arr","len","arr2","BufferPointer","this","ThinEngine","canvasOrContext","antialias","options","adaptToDeviceRatio","_this","_name","forcePOTTextures","isFullscreen","cullBackFaces","renderEvenInBackground","preventCacheWipeBetweenFrames","validateShaderPrograms","_useReverseDepthBuffer","isNDCHalfZRange","hasOriginBottomLeft","disableUniformBuffers","onDisposeObservable","_frameId","_uniformBuffers","_storageBuffers","_webGLVersion","_windowIsBackground","_highPrecisionShadersAllowed","_badOS","_badDesktopOS","_renderingQueueLaunched","_activeRenderLoops","onContextLostObservable","onContextRestoredObservable","_contextWasLost","_doNotHandleContextLost","disableVertexArrayObjects","_colorWrite","_colorWriteChanged","_depthCullingState","_stencilStateComposer","_stencilState","_alphaState","_alphaMode","_alphaEquation","_internalTexturesCache","_renderTargetWrapperCache","_activeChannel","_currentTextureChannel","_boundTexturesCache","_compiledEffects","_vertexAttribArraysEnabled","_uintIndicesCurrentlySet","_currentBoundBuffer","_currentFramebuffer","_dummyFramebuffer","_currentBufferPointers","_currentInstanceLocations","_currentInstanceBuffers","_vaoRecordInProgress","_mustWipeVertexAttributes","_nextFreeTextureSlots","_maxSimultaneousTextures","_maxMSAASamplesOverride","_activeRequests","_lastDevicePixelRatio","_transformTextureUrl","hostInformation","isMobile","premultipliedAlpha","onBeforeTextureInitObservable","_isWebGPU","_snapshotRenderingMode","_useExactSrgbConversions","_viewportCached","x","y","z","w","_unpackFlipYCached","enableUnpackFlipYCached","_boundUniforms","canvas","_creationOptions","stencilGlobal","useHighPrecisionMatrix","getContext","_renderingCanvas","undefined","deterministicLockstep","lockstepMaxSteps","timeStep","preserveDrawingBuffer","audioEngine","audioEngineOptions","audioContext","_audioContext","audioDestination","_audioDestination","stencil","xrCompatible","useExactSrgbConversions","doNotHandleContextLost","navigator","userAgent","_checkForMobile","currentUA","indexOf","document","window","addEventListener","_step","ua","_iterator","ExceptionList","exception","key","targets","RegExp","capture","captureConstraint","constraint","matches","exec","parseInt","_step2","_iterator2","_onContextLost","evt","preventDefault","notifyObservers","_onContextRestored","_restoreEngineAfterContextLost","_initGLContext","bind","powerPreference","disableWebGL2Support","_gl","_shaderPlatformName","deleteQuery","Error","renderbufferStorageMultisample","attributes","getContextAttributes","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","useHighPrecisionFloats","devicePixelRatio","limitDeviceRatio","_hardwareScalingLevel","Math","min","resize","_isStencilEnable","_initFeatures","_caps","maxVertexAttribs","_shaderProcessor","webGLVersion","versionToLog","concat","Version","console","log","description","setAttribute","get","parallelShaderCompile","set","shaderLanguage","useReverse","depthFunc","highPrecisionShaderSupported","dimensions","_framebufferDimensionsObject","_cachedViewport","_emptyTexture","createRawTexture","Uint8Array","_emptyTexture3D","createRawTexture3D","_emptyTexture2DArray","createRawTexture2DArray","_emptyCubeTexture","faceData","cubeData","createRawCubeTexture","activate","mode","snapshotRendering","width","height","_CreateCanvas","createElement","initEngine","_this2","setTimeout","_callee","_a","depthTest","depthMask","stencilTest","_context","prev","_rebuildEffects","_rebuildComputeEffects","_rebuildInternalTextures","_rebuildRenderTargetWrappers","_rebuildBuffers","wipeCaches","stop","doNotHandleTouchAction","_step3","_iterator3","_rebuild","_step4","_iterator4","effect","_pipelineContext","_wasPreviouslyReady","_prepareEffect","isReady","_step5","_iterator5","_step6","_iterator6","maxTexturesImageUnits","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTexturesImageUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxVertexTextureImageUnits","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxSamples","MAX_SAMPLES","maxCubemapTextureSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderTextureSize","MAX_RENDERBUFFER_SIZE","MAX_VERTEX_ATTRIBS","maxVaryingVectors","MAX_VARYING_VECTORS","maxFragmentUniformVectors","MAX_FRAGMENT_UNIFORM_VECTORS","maxVertexUniformVectors","MAX_VERTEX_UNIFORM_VECTORS","getExtension","standardDerivatives","maxAnisotropy","astc","bptc","s3tc","s3tc_srgb","pvrtc","etc1","etc2","textureAnisotropicFilterExtension","uintIndices","fragmentDepthSupported","timerQuery","supportOcclusionQuery","canUseTimestampForTimerQuery","drawBuffersExtension","maxMSAASamples","colorBufferFloat","textureFloat","textureHalfFloat","textureHalfFloatRender","textureFloatLinearFiltering","textureFloatRender","textureHalfFloatLinearFiltering","vertexArrayObject","instancedArrays","textureLOD","blendMinMax","multiview","oculusMultiview","depthTextureExtension","canUseGLInstanceID","canUseGLVertexID","supportComputeShaders","supportSRGBBuffers","supportTransformFeedbacks","textureMaxLevel","texture2DArrayMaxLayerCount","_glVersion","VERSION","rendererInfo","_glRenderer","UNMASKED_RENDERER_WEBGL","_glVendor","UNMASKED_VENDOR_WEBGL","VENDOR","RENDERER","HALF_FLOAT_OES","RGBA16F","RGBA32F","DEPTH24_STENCIL8","getQuery","getQueryEXT","TIMESTAMP_EXT","QUERY_COUNTER_BITS_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","_canRenderToFloatFramebuffer","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","_canRenderToHalfFloatFramebuffer","drawBuffers","drawBuffersWEBGL","DRAW_FRAMEBUFFER","FRAMEBUFFER","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","vertexArrayObjectExtension","createVertexArray","createVertexArrayOES","bindVertexArray","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","instanceExtension","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","getShaderPrecisionFormat","vertexhighp","VERTEX_SHADER","HIGH_FLOAT","fragmenthighp","FRAGMENT_SHADER","precision","blendMinMaxExtension","MAX","MAX_EXT","MIN","MIN_EXT","sRGBExtension","SRGB","SRGB_EXT","SRGB8","SRGB_ALPHA_EXT","SRGB8_ALPHA8","forceSRGBBufferSupportState","LEQUAL","slot","push","_features","forceBitmapOverHTMLImageElement","supportRenderAndCopyToLodForFloatTextures","supportDepthStencilTexture","supportShadowSamplers","uniformBufferHardCheckMatrix","allowTexturePrefiltering","trackUbosInFrame","checkUbosContentBeforeUpload","supportCSM","basisNeedsPOT","support3DTextures","needTypeSuffixInShaderConstants","supportMSAA","supportSSAO2","supportExtendedTextureFormats","supportSwitchCaseInShader","supportSyncTextureRead","needsInvertingBitmap","useUBOBindingCache","needShaderCodeInlining","needToAlwaysBindUniformBuffers","supportRenderPasses","supportSpriteInstancing","_collectUbosUpdatedInFrame","_workingCanvas","createCanvas","context","_workingContext","hasOwnProperty","getGlInfo","vendor","renderer","version","level","renderFunction","index","splice","shouldRender","beginFrame","endFrame","_frameHandler","_queueNewFrame","_boundRenderFunction","getHostWindow","ownerDocument","defaultView","useScreen","arguments","_currentRenderTarget","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","bindedRenderFunction","requester","QueueNewFrame","_renderLoop","color","backBuffer","depth","useStencilGlobalOnly","stencilStateComposer","applyStates","clearColor","r","g","b","a","COLOR_BUFFER_BIT","useReverseDepthBuffer","GEQUAL","clearDepth","DEPTH_BUFFER_BIT","clearStencil","STENCIL_BUFFER_BIT","clear","viewport","requiredWidth","requiredHeight","getRenderWidth","getRenderHeight","_viewport","flushFramebuffer","forceSetSize","changeRatio","clientWidth","innerWidth","clientHeight","innerHeight","setSize","texture","_b","_c","_d","_e","faceIndex","forceFullscreenViewport","lodLevel","layer","webglRTWrapper","unBindFramebuffer","_bindUnboundFramebuffer","_MSAAFramebuffer","_framebuffer","gl","is2DArray","framebufferTextureLayer","COLOR_ATTACHMENT0","_hardwareTexture","underlyingResource","isCube","framebufferTexture2D","TEXTURE_CUBE_MAP_POSITIVE_X","depthStencilTexture","_depthStencilTexture","attachment","_depthStencilTextureWithStencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","TEXTURE_2D","setViewport","pow","culling","zOffset","force","reverseSide","zOffsetUnits","cull","cullFace","BACK","FRONT","setZOffset","setZOffsetUnits","frontFace","CW","CCW","stencilMaterial","enable","framebuffer","bindFramebuffer","_bindTextureDirectly","generateMipmap","disableGenerateMipMaps","onBeforeUnbind","isMulti","unBindMultiColorAttachmentFramebuffer","READ_FRAMEBUFFER","blitFramebuffer","NEAREST","generateMipMaps","generateMipmaps","flush","bindArrayBuffer","_cachedVertexBuffers","data","_createVertexBuffer","STATIC_DRAW","usage","vbo","createBuffer","dataBuffer","bufferData","ARRAY_BUFFER","Float32Array","_resetVertexBufferBinding","references","DYNAMIC_DRAW","bindIndexBuffer","_cachedIndexBuffer","indices","updatable","_normalizeIndexData","ELEMENT_ARRAY_BUFFER","_resetIndexBufferBinding","is32Bits","BYTES_PER_ELEMENT","Uint32Array","Uint16Array","buffer","_unbindVertexArrayObject","_bindBuffer","pipelineContext","blockName","program","uniformLocation","getUniformBlockIndex","uniformBlockBinding","target","bindBuffer","bufferSubData","indx","size","type","normalized","stride","offset","pointer","changed","active","UNSIGNED_INT","INT","vertexAttribIPointer","vertexAttribPointer","indexBuffer","vertexBuffers","overrideVertexBuffers","getAttributesNames","unbindAllAttributes","order","getAttributeLocation","ai","vertexBuffer","enableVertexAttribArray","getBuffer","_vertexAttribPointer","getSize","byteStride","byteOffset","getIsInstanced","getInstanceDivisor","vao","_bindVertexBuffersAttributes","_cachedVertexArrayObject","vertexDeclaration","vertexStrideSize","_cachedEffectForVertexBuffers","attributesCount","getAttributesCount","FLOAT","_bindIndexBufferWithCache","boundBuffer","ul","instancesBuffer","offsetLocation","_deleteBuffer","deleteBuffer","offsetLocations","bindInstancesBuffer","attributesInfo","computeStride","attributeSize","_i","_ai","_currentEffect","getAttributeLocationByName","attributeName","attributeType","divisor","attributeLocation","disableInstanceAttribute","shouldClean","disableAttributeByIndex","disableVertexAttribArray","useTriangles","indexStart","indexCount","instancesCount","drawElementsType","verticesStart","verticesCount","drawArraysType","fillMode","_reportDrawCall","drawMode","_drawMode","indexFormat","UNSIGNED_SHORT","mult","drawElements","drawArrays","TRIANGLES","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLE_STRIP","TRIANGLE_FAN","_key","getPipelineContext","_deletePipelineContext","webGLPipelineContext","__SPECTOR_rebuildProgram","deleteProgram","defines","baseName","attributesNamesOrOptions","uniformsNamesOrEngine","samplers","fallbacks","onCompiled","onError","indexParameters","vertex","vertexElement","vertexToken","vertexSource","fragment","fragmentElement","fragmentToken","fragmentSource","globalDefines","_getGlobalDefines","fullDefines","compiledEffect","source","shaderVersion","_compileRawShader","_ConcatenateShader","shader","createShader","error","NO_ERROR","tempError","getError","isContextLost","shaderSource","compileShader","getShaderSource","vertexCode","fragmentCode","transformFeedbackVaryings","vertexShader","fragmentShader","_createShaderProgram","_compileShader","code","shaderProcessingContext","engine","isParallelCompiled","shaderProgram","createProgram","attachShader","linkProgram","_finalizePipelineContext","getProgramParameter","LINK_STATUS","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCompilationError","_log","fragmentCompilationError","getProgramInfoLog","programLinkError","validateProgram","VALIDATE_STATUS","_error","programValidationError","deleteShader","vertexSourceCode","fragmentSourceCode","createAsRaw","rawVertexSourceCode","rawFragmentSourceCode","rebuildRebind","webGLRenderingState","createRawShaderProgram","createShaderProgram","COMPLETION_STATUS_KHR","action","oldHandler","uniformsNames","results","getUniformLocation","attributesNames","getAttribLocation","bindSamplers","onBind","_onBindObservable","uniform","uniform1i","uniform2i","uniform3i","uniform4i","array","uniform1iv","uniform2iv","uniform3iv","uniform4iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","matrices","uniformMatrix4fv","matrix","uniformMatrix3fv","uniformMatrix2fv","uniform1f","uniform2f","uniform3f","uniform4f","apply","colorMask","bruteForce","_currentProgram","resetTextureCache","reset","UNPACK_PREMULTIPLY_ALPHA_WEBGL","samplingMode","magFilter","minFilter","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","mag","createTexture","_createTexture","fullOptions","format","useSRGBBuffer","samples","isWebGPU","_useSRGBBuffer","layers","filters","_getSamplingParameters","TEXTURE_2D_ARRAY","sizedFormat","_getRGBABufferInternalSizedFormat","internalFormat","_getInternalFormat","_getWebGLTextureType","texImage3D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","baseWidth","baseHeight","noMipmap","url","invertY","scene","_this3","onLoad","prepareTexture","prepareTextureProcessFunction","fallback","forcedExtension","mimeType","loaderOptions","fromData","substr","fromBlob","isBase64","originalUrl","_originalUrl","lastDot","lastIndexOf","extension","substring","toLowerCase","loader","queryStringIndex","split","_step7","_iterator7","_TextureLoaders","availableLoader","canLoad","addPendingData","_getUseSRGBBuffer","_buffer","onLoadObserver","onLoadedObservable","add","onInternalError","message","removePendingData","remove","_createTextureBase","onErrorObservable","callback","loadData","loadMipmap","isCompressed","loadFailed","ArrayBuffer","isView","_loadFile","offlineProvider","request","responseURL","onload","img","decoding","close","_FileToolsLoadImage","imageOrientation","Blob","_this4","_prepareWebGLTexture","potWidth","potHeight","continuationCallback","isPot","RGBA","RGB","texelFormat","UNSIGNED_BYTE","_supportsHardwareTextureRescaling","_prepareWorkingCanvas","drawImage","_rescaleTexture","_releaseTexture","destination","onComplete","UNPACK_FLIP_Y_WEBGL","UNPACK_ALIGNMENT","TEXTURE_CUBE_MAP","is3D","TEXTURE_3D","isMultiview","_getTextureTarget","_setTextureParameterInteger","wrapU","wrapV","wrapR","_getTextureWrapMode","_cachedWrapU","_cachedWrapV","TEXTURE_WRAP_R","_cachedWrapR","internalTexture","generateStencil","bilinearFiltering","comparisonFunction","_comparisonFunction","samplingParameters","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","lod","compressedTexImage2D","imageData","babylonInternalFormat","useTextureWidthAndHeight","textureType","_unpackFlipY","lodMaxWidth","round","LOG2E","lodMaxHeight","max","xOffset","yOffset","texSubImage2D","bindTarget","_uploadDataToTextureDirectly","processFunction","_this5","getCaps","needPOTTextures","GetExponentOfTwo","_prepareWebGLTextureContinuation","generateStencilBuffer","generateDepthBuffer","_createRenderBuffer","DEPTH_STENCIL","depthFormat","DEPTH_COMPONENT16","DEPTH_COMPONENT32F","STENCIL_INDEX8","STENCIL_ATTACHMENT","msInternalFormat","unbindBuffer","renderBuffer","createRenderbuffer","_updateRenderBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","_deleteTexture","unbindAllTextures","_lodTextureHigh","dispose","_lodTextureMid","_lodTextureLow","_irradianceTexture","rtWrapper","deleteTexture","useProgram","_setProgram","getSamplers","getUniform","activeTexture","TEXTURE0","forTextureDataUpdate","wasPreviouslyBound","isTextureForRendering","_associatedChannel","currentTextureBound","_activateCurrentTexture","bindTexture","_bindSamplerUniformToChannel","channel","_setTexture","sourceSlot","_currentState","REPEAT","MIRRORED_REPEAT","isPartOfTextureArray","video","update","delayLoadState","delayLoad","getInternalTexture","emptyCubeTexture","emptyTexture3D","emptyTexture2DArray","emptyTexture","needToBind","_cachedCoordinatesMode","coordinatesMode","textureWrapMode","_setAnisotropicLevel","anisotropicFilteringLevel","textures","_textureUnits","Int32Array","anisotropicFilterExtension","_cachedAnisotropicFilteringLevel","_setTextureParameterFloat","TEXTURE_MAX_ANISOTROPY_EXT","parameter","texParameterf","_i2","stopRenderLoop","deleteFramebuffer","releaseEffects","releaseComputeEffects","removeEventListener","_step8","_iterator8","abort","_canRenderToFramebuffer","successful","fb","createFramebuffer","status","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readFormat","readType","readPixels","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","HALF_FLOAT","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_5_9_9_9_REV","FLOAT_32_UNSIGNED_INT_24_8_REV","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED","RG","RED_INTEGER","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","R8_SNORM","RG8_SNORM","RGB8_SNORM","R8I","RG8I","RGB8I","RGBA8I","RGBA8_SNORM","R8","RG8","RGB8","RGBA8","R8UI","RG8UI","RGB8UI","RGBA8UI","R16I","RG16I","RGB16I","RGBA16I","R16UI","RG16UI","RGB16UI","RGBA16UI","R32I","RG32I","RGB32I","RGBA32I","R32UI","RG32UI","RGB32UI","RGBA32UI","R32F","RG32F","RGB32F","R16F","RG16F","RGB16F","RGB565","R11F_G11F_B10F","RGB9_E5","RGBA4","RGB5_A1","RGB10_A2","RGB10_A2UI","onSuccess","onProgress","useArrayBuffer","_this6","_FileToolsLoadFile","onCompleteObservable","hasAlpha","flushRenderer","numChannels","Promise","resolve","OffscreenCanvas","input","imageBitmapOptions","isSupported","_HasMajorPerformanceCaveat","_IsSupported","tempcanvas","WebGLRenderingContext","failIfMajorPerformanceCaveat","c","CeilingPOT","FloorPOT","pot","NearestPOT","func","requestPostAnimationFrame","requestAnimationFrame","CollisionsEpsilon"],"sourceRoot":""}